function SapeRtbCommon(){this._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return this;};SapeRtbCommon.prototype.getStringHash=function(str){var strrev=str.split("").reverse().join(""),h1=this.crc32(str),h1s=h1.toString(),h2=this.crc32(strrev),h2s=h2.toString();return h1s+h2s;};SapeRtbCommon.prototype.utf8Encode=function(str){str=str.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<str.length;n++){var c=str.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c);}else if((c>127)&&(c<2048)){utftext+=String.fromCharCode((c>>6)|192);utftext+=String.fromCharCode((c&63)|128);}else{utftext+=String.fromCharCode((c>>12)|224);utftext+=String.fromCharCode(((c>>6)&63)|128);utftext+=String.fromCharCode((c&63)|128);}}return utftext;};SapeRtbCommon.prototype.utf8Decode=function(utftext){var string="";var i=0;var c=c1=c2=0;while(i<utftext.length){c=utftext.charCodeAt(i);if(c<128){string+=String.fromCharCode(c);i++;}else if((c>191)&&(c<224)){c2=utftext.charCodeAt(i+1);string+=String.fromCharCode(((c&31)<<6)|(c2&63));i+=2;}else{c2=utftext.charCodeAt(i+1);c3=utftext.charCodeAt(i+2);string+=String.fromCharCode(((c&15)<<12)|((c2&63)<<6)|(c3&63));i+=3;}}return string;};SapeRtbCommon.prototype.crc32=function(str){str=this.utf8Encode(str);var table="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 "+"0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 "+"1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 "+"136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 "+"3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B "+"35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 "+"26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F "+"2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D "+"76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 "+"7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 "+"6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 "+"65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 "+"4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB "+"4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 "+"5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F "+"5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD "+"EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 "+"E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 "+"F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 "+"FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 "+"D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B "+"D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 "+"CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F "+"C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D "+"9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 "+"95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 "+"86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 "+"88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 "+"A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB "+"AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 "+"BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF "+"B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D";var crc=0,x=0,y=0;crc=crc ^(-1);for(var i=0,iTop=str.length;i<iTop;i++){y=(crc ^ str.charCodeAt(i))&0xFF;x="0x"+table.substr(y*9,8);crc=(crc>>>8)^ x;}return(crc ^(-1))>>>0;};SapeRtbCommon.prototype.arrayUnique=function(arr){var o={},a=[],i,e;for(i=0;e=arr[i];i++){o[e]=1;}for(e in o){a.push(e);}return a;};SapeRtbCommon.prototype.createIFrame=function(id,w,h,src){var f=document.createElement('iframe');f.setAttribute('scrolling','no');f.setAttribute('frameborder','0');f.setAttribute('marginwidth','0');f.setAttribute('marginheight','0');f.setAttribute('width',w);f.setAttribute('height',h);f.id=id;if(src!==false){f.src=(typeof src!=='undefined')?src:'about:blank';}return f;};SapeRtbCommon.prototype.createIFrameWithContent=function(p,html,width,height){var id='FRAME_'+p.id;p.appendChild(this.createIFrame(id,width,height));window.SapeRtbUCodeIFrameContent=function(n,id,html){var d;try{if(document.all&&!window.opera){d=window.frames[id].document;}else if(document.getElementById){d=document.getElementById(id).contentDocument;}}catch(e){;}if(n>0){if(typeof d==='undefined'){setTimeout(SapeRtbUCodeIFrameContent,100,--n,id,html);}else{d.open();d.write(html);d.close();}}};SapeRtbUCodeIFrameContent(10,id,html);};SapeRtbCommon.prototype.isInIframe=function(){try{return window.self!==window.top;}catch(e){return true;}};SapeRtbCommon.prototype.objectIsEqual=function(x,y){if(Object.is){return Object.is(x,y);}if(x===y){return x!==0||1/x===1/y;}return x!==x&&y!==y;};SapeRtbCommon.prototype.objectClone=function(source){if(Object.assign){return Object.assign({},source)}if(typeof source!=='object'){throw new TypeError('Cannot convert first argument to object');}var to=Object();var keysArray=Object.keys(Object(source));for(var nextIndex=0,len=keysArray.length;nextIndex<len;nextIndex++){var nextKey=keysArray[nextIndex];var desc=Object.getOwnPropertyDescriptor(source,nextKey);if(desc!==undefined&&desc.enumerable){to[nextKey]=source[nextKey];}}return to;};SapeRtbCommon.prototype.nodeRemove=function(node){if(typeof node.remove==='function'){node.remove();}else{node.parentNode.removeChild(node);}};SapeRtbCommon.prototype.nodeScriptClone=function(node){var script=document.createElement("script");script.text=node.innerHTML;for(var i=node.attributes.length-1;i>=0;i--){script.setAttribute(node.attributes[i].name,node.attributes[i].value);}return script;};SapeRtbCommon.prototype.evalNode=function(node){if(node.tagName==='SCRIPT'){node.parentNode.replaceChild(this.nodeScriptClone(node),node);}else{var i=0,children=node.childNodes;while(i<children.length){this.evalNode(children[i++]);}}return node;};SapeRtbCommon.prototype.addEventListenerCrossBrowser=function(target,type,handler){if(target.addEventListener){target.addEventListener(type,handler,false);}else if(target.attachEvent){target.attachEvent("on"+type,function(event){handler.call(target,event)});}else{throw 'Cannot add event listener: no Event API support in client'}};SapeRtbCommon.prototype.hasClass=function(e,c){return(" "+e.className+" ").indexOf(" "+c+" ")>-1;};SapeRtbCommon.prototype.previousTag=function(node){var node=node.previousSibling;return(node&&node.nodeType!=1)?this.previousTag(node):node;};SapeRtbCommon.prototype.nextTag=function(node){var node=node.nextSibling;return(node&&node.nodeType!=1)?this.nextTag(node):node;};SapeRtbCommon.prototype.firstChildTag=function(node){var node=node.firstChild;return(node&&node.nodeType!=1)?this.nextTag(node):node;};SapeRtbCommon.prototype.lastChildTag=function(node){var node=node.lastChild;return(node&&node.nodeType!=1)?this.previousTag(node):node;};SapeRtbCommon.prototype.encode64=function(input){var output="";var chr1,chr2,chr3,enc1,enc2,enc3,enc4;var i=0;input=this.utf8Encode(input);while(i<input.length){chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);enc1=chr1>>2;enc2=((chr1&3)<<4)|(chr2>>4);enc3=((chr2&15)<<2)|(chr3>>6);enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64;}else if(isNaN(chr3)){enc4=64;}output=output+this._keyStr.charAt(enc1)+this._keyStr.charAt(enc2)+this._keyStr.charAt(enc3)+this._keyStr.charAt(enc4);}return output;};SapeRtbCommon.prototype.decode64=function(input){var output="";var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0;input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(i<input.length){enc1=this._keyStr.indexOf(input.charAt(i++));enc2=this._keyStr.indexOf(input.charAt(i++));enc3=this._keyStr.indexOf(input.charAt(i++));enc4=this._keyStr.indexOf(input.charAt(i++));chr1=(enc1<<2)|(enc2>>4);chr2=((enc2&15)<<4)|(enc3>>2);chr3=((enc3&3)<<6)|enc4;output=output+String.fromCharCode(chr1);if(enc3!=64){output=output+String.fromCharCode(chr2);}if(enc4!=64){output=output+String.fromCharCode(chr3);}}output=this.utf8Decode(output);return output;};SapeRtbCommon.prototype.sapeRTBisMobile=function(){return(/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase()));};SapeRtbCommon.prototype.generateSessionId=function(){var uniqid=(Date.now()/1000).toString(16).split('.').join('');uniqid=uniqid+'00000000000000'.substring(0,14-uniqid.length);return uniqid.substring(0,8)+'-'+uniqid.substring(8,12)+'-'+uniqid.substring(12,14)+('xx-xxxx-xxxxxxxxxxxx'.replace(/[x]/g,function(){var r=Math.random()*36|0;return r.toString(36);}));};SapeRtbCommon.prototype.insertAfter=function(referenceNode,newNode){if(referenceNode.nextSibling){referenceNode.parentNode.insertBefore(newNode,referenceNode.nextSibling);}else{referenceNode.parentNode.appendChild(newNode);}};SapeRtbCommon.prototype.getTimeZoneOffsetIso8601=function(){var o=(new Date()).getTimezoneOffset();return(o>0?"-":"+")+this.padInt(Math.floor(Math.abs(o)/60))+':'+this.padInt(Math.abs(o)%60);};SapeRtbCommon.prototype.encodeUriParam=function(value){if(null==value){return '';}value=''+value;return(encodeURIComponent instanceof Function)?encodeURIComponent(value):escape(value);};SapeRtbCommon.prototype.padInt=function(v){return(v<10?'0'+v:''+v);};SapeRtbCommon.prototype.onIFrameDocumentReady=function(id,onReady,onTimeout){var f=function(id,onReady,onTimeout,n){var d;try{if(document.all&&!window.opera){d=window.frames[id].document;}else if(document.getElementById){d=document.getElementById(id).contentDocument;}}catch(e){}if(n>0){if(typeof d==='undefined'||d===null||(d.readyState!='interactive'&&d.readyState!='complete')){n--;setTimeout(f,100,id,onReady,onTimeout,n);}else{onReady(d);}}else{onTimeout();}};f(id,onReady,onTimeout,50);};SapeRtbCommon.prototype.strEndsWith=function(str,suffix){return str&&str.indexOf(suffix,str.length-suffix.length)!==-1;};SapeRtbCommon.prototype.setConsole=function(){var methods=["assert","cd","clear","count","countReset","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","select","table","time","timeEnd","timeStamp","timeline","timelineEnd","trace","warn"];var length=methods.length;var console=(window.console=window.console||{});var method;var noop=function(){};while(length--){method=methods[length];if(!console[method])console[method]=noop;}};SapeRtbCommon.prototype.clone=function(obj){var copy;if(null==obj||"object"!=typeof obj)return obj;if(obj instanceof Date){copy=new Date();copy.setTime(obj.getTime());return copy;}if(obj instanceof Array){copy=[];for(var i=0,len=obj.length;i<len;i++){copy[i]=this.clone(obj[i]);}return copy;}if(obj instanceof Object){copy={};for(var attr in obj){if(obj.hasOwnProperty(attr))copy[attr]=this.clone(obj[attr]);}return copy;}throw new Error("Unable to copy obj! Its type isn't supported.");};SapeRtbCommon.prototype.json_parse=function(sJSON){return eval('('+sJSON+')');};SapeRtbCommon.prototype.json_stringify=(function(){var toString=Object.prototype.toString;var hasOwnProperty=Object.prototype.hasOwnProperty;var isArray=Array.isArray||function(a){return toString.call(a)==='[object Array]';};var escMap={'"':'\\"','\\':'\\\\','\b':'\\b','\f':'\\f','\n':'\\n','\r':'\\r','\t':'\\t'};var escFunc=function(m){return escMap[m]||'\\u'+(m.charCodeAt(0)+0x10000).toString(16).substr(1);};var escRE=/[\\"\u0000-\u001F\u2028\u2029]/g;return function stringify(value){if(value==null){return 'null';}else if(typeof value==='number'){return isFinite(value)?value.toString():'null';}else if(typeof value==='boolean'){return value.toString();}else if(typeof value==='object'){if(typeof value.toJSON==='function'){return stringify(value.toJSON());}else if(isArray(value)){var res='[';for(var i=0;i<value.length;i++)res+=(i?', ':'')+stringify(value[i]);return res+']';}else if(toString.call(value)==='[object Object]'){var tmp=[];for(var k in value){if(hasOwnProperty.call(value,k))tmp.push(stringify(k)+': '+stringify(value[k]));}return '{'+tmp.join(', ')+'}';}}return '"'+value.toString().replace(escRE,escFunc)+'"';};})();SapeRtbCommon.prototype.get_keywords=function(){var keywords='';var metas=document.getElementsByTagName('meta');if(metas){for(var x=0,y=metas.length;x<y;x++){if(metas[x].name.toLowerCase()=="keywords"){keywords+=metas[x].content;}}}return keywords!=''?keywords:false;};SapeRtbCommon.prototype.get_href=function(){var href='';try{href=top.location.href;}catch(err){}if(href==''){var wnd=window;do{try{if(typeof wnd.document.referrer!=='undefined'){href=wnd.document.referrer.match(/([^\?]+)/)[1];}}catch(err){}if(wnd){wnd=wnd.parent;}}while(wnd&&wnd!=wnd.parent);}if(href==''){href=window.location.href;}return href;};function SapeRtbPlayer(element,options){if(typeof options==='undefined'){options={};}var _url=false;var _vast=false;var _debug=options.debug||false;var _vastInited=false;var _visibility=options.visibility||false;var _hideControls=false;var _onInit=undefined;var _onStart=undefined;var _onSkipped=undefined;var _onClick=undefined;var _onError=undefined;var _onComplete=undefined;var _onEvent=undefined;var _self=this;var _adVideo=typeof element==='string'?document.getElementById(element):element;var _adVideoParent=_adVideo.parentElement;var _adRoot=null;var _adContainer=null;var _adDiv=document.createElement('div');var _adSound=null;var _adPlay=null;var _adDisplayContainer=null;var _adsLoader=null;var _adsManager=null;var _adCurrent=null;var _adResizeListener=false;var _width=_adVideo.getAttribute('width')||null;var _height=_adVideo.getAttribute('height')||null;var _autoplay=_adVideo.getAttribute('autoplay')===''||_adVideo.getAttribute('autoplay')==='autoplay';var _muted=_adVideo.muted;var _volume=0;var _events=[];var _fail=false;if(_width===null||_height===null){if(_adVideoParent.tagName.toLowerCase()!=='body'){_adResizeListener=true;_width=_adVideoParent.offsetWidth;_height=_adVideoParent.offsetHeight;}else{_adResizeListener=window;_width=window.innerWidth;_height=window.innerHeight;}}var _setOptions=function(options){_url=options.url||false;_vast=options.xml||false;_onInit=options.onInit||undefined;_onStart=options.onStart||undefined;_onSkipped=options.onSkipped||undefined;_onClick=options.onClick||undefined;_onError=options.onError||undefined;_onComplete=options.onComplete||undefined;_onEvent=options.onEvent||undefined;_hideControls=options.hideControls||false;_vastInited=false;};var _addEvent=function(event,element,callback){if(element.addEventListener){element.addEventListener(event,callback,false);}else{element.attachEvent('on'+event,callback);}};var _log=function(msg,type){_debug&&w.console&&w.console[type?'error':'log']&&w.console[type?'error':'log'](msg)};var _waitGoogle=function(num){if(typeof google!=='undefined'&&google.ima!==0){if(_autoplay){_getVast();}else if(typeof _onEvent==='function'){_onEvent.call(_self,'playerAutoplayFalse',0);}}else{if(typeof num==='undefined'){num=1;}if(num===50&&typeof _onEvent==='function'){_onEvent.call(_self,'playerImaWait',0);}setTimeout(_waitGoogle,50,num+1)}};var _loadVastXml=function(url,callback){var client=new XMLHttpRequest();client.open('GET',url);client.onload=function(){var status=client.status===200;if(status){_vast=client.responseText||'<VAST version="3.0"></VAST>';}callback(status);};client.onerror=function(){if(typeof _onEvent==='function'){_onEvent.call(_self,'playerVastError',0);}if(typeof _onError==='function'){_onError.call(_self);}};client.send();};var _appendScript=function(src,async){var script=document.createElement("SCRIPT");script.src=src;script.type='text/javascript';script.async=async;if(document.head){document.head.appendChild(script);}else{document.getElementsByTagName('head')[0].appendChild(script);}};var _initAdPlayer=function(){_adDisplayContainer=new google.ima.AdDisplayContainer(_adContainer);_adsLoader=new google.ima.AdsLoader(_adDisplayContainer);_adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(event){_onAdsManagerLoaded(event);_onAdStart();});_adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(event){_onAdError(event);});_adVideo.style.backgroundColor='transparent';var adsRequest=new google.ima.AdsRequest;adsRequest.adsResponse=_vast;adsRequest.linearAdSlotWidth=_width;adsRequest.linearAdSlotHeight=_height;adsRequest.setAdWillAutoPlay(_autoplay);adsRequest.setAdWillPlayMuted(_muted);_adsLoader.requestAds(adsRequest);if(typeof _onEvent==='function'){_onEvent.call(_self,'playerVastRun',0);}};var _initSoundState=function(state){if(typeof state==='undefined'){state=_adSound.className.indexOf('mute')===-1;}if(state===true){_adSound.className='ad-sound mute';return 0;}_adSound.className='ad-sound';return 1;};var _initPlayState=function(state){if(typeof state==='undefined'){state=_adPlay.className.indexOf('paused')===-1;}if(state===true){_adPlay.className='ad-play paused';return 0;}_adPlay.className='ad-play';return 1;};var _onAdEvent=function(event){var ad=event.getAd();switch(event.type){case google.ima.AdEvent.Type.LOADED:_adsManager.setVolume(_volume);_onAdStart();break;case google.ima.AdEvent.Type.STARTED:if(typeof _onStart==='function'){_onStart.call(_self);_onStart=null;}_adsManager.setVolume(_volume);_onAdStart(ad);break;case google.ima.AdEvent.Type.PAUSED:_initPlayState(true);break;case google.ima.AdEvent.Type.RESUMED:_initPlayState(false);break;case google.ima.AdEvent.Type.SKIPPED:case google.ima.AdEvent.Type.USER_CLOSE:if(typeof _onSkipped==='function'){_onSkipped.call(_self);}_onAdStop(ad);break;case google.ima.AdEvent.Type.CLICK:if(typeof _onClick==='function'){_onClick.call(_self);}break;case google.ima.AdEvent.Type.COMPLETE:_onAdStop(ad);break;}};var _onAdStart=function(ad){if(typeof ad!=='undefined'){if(ad.isLinear()){_initPlayState(false);_adVideo.pause();_adCurrent='linear';}else{_adCurrent='non-linear';}}if(_hideControls){_adPlay.style.display='none';_adSound.style.display='none';}};var _onAdStop=function(ad){if(typeof ad!=='undefined'){if(ad.isLinear()){_initPlayState(false);_adVideo.play();}}if(_hideControls){_adPlay.style.display=null;_adSound.style.display=null;}};var _onAdsManagerLoaded=function(manager){var options=new google.ima.AdsRenderingSettings;if(options.restoreCustomPlaybackStateOnAdBreakComplete&&_adsManager){try{_adsManager.destroy();}catch(e){_log(e);}}_adsManager=manager.getAdsManager({currentTime:0},options);for(var key in google.ima.AdEvent.Type){if(google.ima.AdEvent.Type.hasOwnProperty(key)){switch(google.ima.AdEvent.Type[key]){case google.ima.AdEvent.Type.AD_PROGRESS:case google.ima.AdEvent.Type.AD_BUFFERING:case google.ima.AdEvent.Type.AD_METADATA:case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:case google.ima.AdEvent.Type.LOG:break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:_adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(event){if(typeof _onEvent==='function'){_onEvent.call(_self,event.type,0);}if(typeof _onComplete==='function'){_onComplete.call(_self);}_adCurrent=false;});break;case google.ima.AdErrorEvent.Type.AD_ERROR:_adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(event){_onAdError(event);});break;default:try{_adsManager.addEventListener(google.ima.AdEvent.Type[key],function(event){_onAdEvent(event);if(typeof _onEvent==='function'){_onEvent.call(_self,event.type,0);}});}catch(e){_log(e.message,true);}break;}}}_adDisplayContainer.initialize();try{_adsManager.init(_width,_height,google.ima.ViewMode.NORMAL);_adsManager.start();_adsManager.setVolume(_volume);}catch(e){_log(e,!0)}};var _onAdError=function(e){if(typeof _onEvent==='function'){_onEvent.call(_self,e.type,e.getError?e.getError().getErrorCode():0);}try{if(_adsManager){_adsManager.destroy();}}catch(e){_log(e.message,true);}if(_autoplay&&_adCurrent===null){_adVideo.play();}_onAdStop();_log(e.getError(),true);if(typeof _onError==='function'){_onError.call(_self);}};var _onResize=function(event,self){if(typeof self==='undefined'){self=this;}_resize(self.innerWidth,self.innerHeight);};var _resize=function(width,height){_width=width;_height=height;_adRoot.style.width=_width+'px';_adRoot.style.height=_height+'px';_adRoot.style.display='inline-block';_adVideo.style.width=_width+'px';_adVideo.style.height=_height+'px';_adDiv.style.width=_width+'px';_adDiv.style.height=_height+'px';_adContainer.style.width=_width+'px';_adContainer.style.height=_height+'px';if(_adsManager){_adsManager.resize(_width,_height,google.ima.ViewMode.NORMAL);}};var _getVast=function(){if(_vastInited===false&&_autoplay){if(_url){_loadVastXml(_url,function(success){if(success){if(typeof _onEvent==='function'){_onEvent.call(_self,'playerVastLoaded',0);}_initAdPlayer();}else if(typeof _onEvent==='function'){_onEvent.call(_self,'playerVastError',0);}});}else if(_self.hasAd()){_initAdPlayer();}_vastInited=true;}};var _getVisibility=function(){var win=window;var doc=_adVideo;var pos={t:0,l:0,w:_adVideo.clientWidth,h:_adVideo.clientHeight};while(1){var rect=doc.getBoundingClientRect();var h=win.innerHeight||win.document.documentElement.clientHeight||win.document.body.clientHeight;var w=win.innerWidth||win.document.documentElement.clientWidth||win.document.body.clientWidth;pos.t=pos.t+rect.top;if(pos.t<0){pos.h=Math.min(pos.h,Math.min(h,Math.max(0,pos.h+pos.t)));pos.t=0;}else{pos.h=Math.max(0,Math.min(pos.h,h-pos.t));}pos.l=pos.l+rect.left;if(pos.l<0){pos.w=Math.min(pos.w,Math.min(w,Math.max(0,pos.w+rect.left)));pos.l=0;}else{pos.w=Math.max(0,Math.min(pos.w,w-pos.l));}if(win!==win.parent){doc=win.frameElement;win=win.parent;}else{break;}}var d=pos.w*pos.h;if(d){return Math.round(d*100/(_adVideo.clientWidth*_adVideo.clientHeight));}return 0;};var _initDom=function(autoplay,muted){var _adStyle=document.createElement('STYLE'),_win=window,style='.sape-rtb-video-player_96119.ad-main-container{position:relative;background:rgba(0,0,0,0.8);overflow:hidden}.sape-rtb-video-player_96119 .ad-content-container,.ad-container{position:absolute;left:0;top:0}.sape-rtb-video-player_96119 .ad-container .ad-sound,.ad-container .ad-play{position:absolute;z-index:999999;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;padding:6px;background:rgba(0,0,0,0.5);cursor:pointer;right:10px;bottom:10px;opacity:.7}.sape-rtb-video-player_96119 .ad-container .ad-play{right:50px;bottom:10px}.sape-rtb-video-player_96119 .ad-container .ad-sound > div,.ad-container .ad-play > div{width:24px;height:24px;background:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48cGF0aCBmaWxsPSIjZmZmZmZmIiBkPSJNMjQ2Ljk2NyA3MS4wNUwxNTcuOTk3IDE2MEg1NS45MzdjLTEzLjI2IDAtMjQgMTAuNzQtMjQgMjR2MTQ0YzAgMTMuMjUgMTAuNzQgMjQgMjQgMjRoMTAyLjA2bDg4Ljk3IDg4Ljk1YzE1LjAzIDE1LjAzIDQwLjk3IDQuNDcgNDAuOTctMTYuOTdWODguMDJjMC0yMS40Ni0yNS45Ni0zMS45OC00MC45Ny0xNi45N3ptMjMzLjMyLTUxLjA4Yy0xMS4xNy03LjMzLTI2LjE4LTQuMjQtMzMuNTEgNi45NS03LjM0IDExLjE3LTQuMjIgMjYuMTggNi45NSAzMy41MSA2Ni4yNyA0My40OSAxMDUuODIgMTE2LjYgMTA1LjgyIDE5NS41OCAwIDc4Ljk4LTM5LjU1IDE1Mi4wOS0xMDUuODIgMTk1LjU4LTExLjE3IDcuMzItMTQuMjkgMjIuMzQtNi45NSAzMy41IDcuMDQgMTAuNzEgMjEuOTMgMTQuNTYgMzMuNTEgNi45NSA3OS45Mi01Mi40NiAxMjcuNjUtMTQwLjcxIDEyNy42NS0yMzYuMDRzLTQ3LjczLTE4My41Ny0xMjcuNjUtMjM2LjAzek01MTEuOTM3IDI1NmMwLTYzLjUzLTMyLjA2LTEyMS45NC04NS43Ny0xNTYuMjQtMTEuMTktNy4xNC0yNi4wMy0zLjgyLTMzLjEyIDcuNDZzLTMuNzggMjYuMjEgNy40MSAzMy4zNmMzOS43NSAyNS4zOSA2My40OCA2OC41MyA2My40OCAxMTUuNDJzLTIzLjczIDkwLjAzLTYzLjQ4IDExNS40MmMtMTEuMTkgNy4xNC0xNC41IDIyLjA3LTcuNDEgMzMuMzYgNi41MSAxMC4zNiAyMS4xMiAxNS4xNCAzMy4xMiA3LjQ2IDUzLjcxLTM0LjMgODUuNzctOTIuNyA4NS43Ny0xNTYuMjR6bS0xNDEuNzctNzYuODdjLTExLjU4LTYuMzMtMjYuMTktMi4xNi0zMi42MSA5LjQ1LTYuMzkgMTEuNjEtMi4xNiAyNi4yIDkuNDUgMzIuNjEgMTIuOTEgNy4wOSAyMC45MyAyMC40NCAyMC45MyAzNC44MSAwIDE0LjM4LTguMDIgMjcuNzItMjAuOTIgMzQuODEtMTEuNjEgNi40MS0xNS44NCAyMS05LjQ1IDMyLjYxIDYuNDMgMTEuNjYgMjEuMDUgMTUuOCAzMi42MSA5LjQ1IDI4LjIzLTE1LjU1IDQ1Ljc3LTQ1IDQ1Ljc3LTc2Ljg4cy0xNy41NC02MS4zMi00NS43OC03Ni44NnoiLz48L3N2Zz4=) no-repeat center center;opacity:.8}.sape-rtb-video-player_96119 .ad-container .mute > div{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48cGF0aCBmaWxsPSIjZmZmZmZmIiBkPSJNNjMzLjgyIDQ1OC4xbC02OS01My4zM0M1OTIuNDIgMzYwLjggNjA4IDMwOS42OCA2MDggMjU2YzAtOTUuMzMtNDcuNzMtMTgzLjU4LTEyNy42NS0yMzYuMDMtMTEuMTctNy4zMy0yNi4xOC00LjI0LTMzLjUxIDYuOTUtNy4zNCAxMS4xNy00LjIyIDI2LjE4IDYuOTUgMzMuNTEgNjYuMjcgNDMuNDkgMTA1LjgyIDExNi42IDEwNS44MiAxOTUuNTggMCA0Mi43OC0xMS45NiA4My41OS0zMy4yMiAxMTkuMDZsLTM4LjEyLTI5LjQ2QzUwMy40OSAzMTguNjggNTEyIDI4OC4wNiA1MTIgMjU2YzAtNjMuMDktMzIuMDYtMTIyLjA5LTg1Ljc3LTE1Ni4xNi0xMS4xOS03LjA5LTI2LjAzLTMuOC0zMy4xMiA3LjQxLTcuMDkgMTEuMi0zLjc4IDI2LjAzIDcuNDEgMzMuMTNDNDQwLjI3IDE2NS41OSA0NjQgMjA5LjQ0IDQ2NCAyNTZjMCAyMS4yMS01LjAzIDQxLjU3LTE0LjIgNTkuODhsLTM5LjU2LTMwLjU4YzMuMzgtOS4zNSA1Ljc2LTE5LjA3IDUuNzYtMjkuMyAwLTMxLjg4LTE3LjUzLTYxLjMzLTQ1Ljc3LTc2Ljg4LTExLjU4LTYuMzMtMjYuMTktMi4xNi0zMi42MSA5LjQ1LTYuMzkgMTEuNjEtMi4xNiAyNi4yIDkuNDUgMzIuNjEgMTEuNzYgNi40NiAxOS4xMiAxOC4xOCAyMC40IDMxLjA2TDI4OCAxOTAuODJWODguMDJjMC0yMS40Ni0yNS45Ni0zMS45OC00MC45Ny0xNi45N2wtNDkuNzEgNDkuN0w0NS40NyAzLjM3QzM4LjQ5LTIuMDUgMjguNDMtLjggMjMuMDEgNi4xOEwzLjM3IDMxLjQ1Qy0yLjA1IDM4LjQyLS44IDQ4LjQ3IDYuMTggNTMuOWw1ODguMzYgNDU0LjczYzYuOTggNS40MyAxNy4wMyA0LjE3IDIyLjQ2LTIuODFsMTkuNjQtMjUuMjdjNS40MS02Ljk3IDQuMTYtMTcuMDItMi44Mi0yMi40NXpNMzIgMTg0djE0NGMwIDEzLjI1IDEwLjc0IDI0IDI0IDI0aDEwMi4wNmw4OC45NyA4OC45NWMxNS4wMyAxNS4wMyA0MC45NyA0LjQ3IDQwLjk3LTE2Ljk3VjM1Mi42TDQzLjc2IDE2My44NEMzNi44NiAxNjguMDUgMzIgMTc1LjMyIDMyIDE4NHoiLz48L3N2Zz4=)}.sape-rtb-video-player_96119 .ad-container .ad-play > div{width:14px;height:14px;margin:5px;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NDggNTEyIj48cGF0aCBmaWxsPSIjZmZmZmZmIiBkPSJNMTQ0IDQ3OUg0OGMtMjYuNSAwLTQ4LTIxLjUtNDgtNDhWNzljMC0yNi41IDIxLjUtNDggNDgtNDhoOTZjMjYuNSAwIDQ4IDIxLjUgNDggNDh2MzUyYzAgMjYuNS0yMS41IDQ4LTQ4IDQ4em0zMDQtNDhWNzljMC0yNi41LTIxLjUtNDgtNDgtNDhoLTk2Yy0yNi41IDAtNDggMjEuNS00OCA0OHYzNTJjMCAyNi41IDIxLjUgNDggNDggNDhoOTZjMjYuNSAwIDQ4LTIxLjUgNDgtNDh6Ii8+PC9zdmc+)}.sape-rtb-video-player_96119 .ad-container .paused > div{margin:5px 4px 5px 6px;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NDggNTEyIj48cGF0aCBmaWxsPSIjZmZmZmZmIiBkPSJNNDI0LjQgMjE0LjdMNzIuNCA2LjZDNDMuOC0xMC4zIDAgNi4xIDAgNDcuOVY0NjRjMCAzNy41IDQwLjcgNjAuMSA3Mi40IDQxLjNsMzUyLTIwOGMzMS40LTE4LjUgMzEuNS02NC4xIDAtODIuNnoiLz48L3N2Zz4=)}';_autoplay=_autoplay?autoplay:false;_muted=_autoplay?(_muted||muted):_muted;_adRoot=document.createElement('div');_adRoot.className='sape-rtb-video-player_96119 ad-main-container';_adVideo.parentNode.insertBefore(_adRoot,_adVideo.nextSibling);_adDiv.className='ad-content-container';_adDiv.appendChild(_adVideo);_adSound=document.createElement('div');_adSound.className='ad-sound'+(_muted?' mute':'');_adSound.appendChild(document.createElement('div'));_adPlay=document.createElement('div');_adPlay.className='ad-play'+(_autoplay?'':' paused');_adPlay.appendChild(document.createElement('div'));_adContainer=document.createElement('div');_adContainer.className='ad-container';_adContainer.appendChild(_adSound);_adContainer.appendChild(_adPlay);_resize(_width,_height);_adRoot.appendChild(_adDiv);_adRoot.appendChild(_adContainer);if(_adResizeListener!==false){if(_adResizeListener===true){_adResizeListener=document.createElement('iframe');_adResizeListener.className='ad-main-listener';_adResizeListener.style.cssText='position: absolute; left: 0; top: 0; width: 100%; height: 100%; border: 0; padding: 0; margin: 0;';_adVideoParent.style.position='relative';_adVideoParent.insertBefore(_adResizeListener,_adRoot);_addEvent('resize',_adResizeListener.contentWindow,_onResize);_onResize(null,_adResizeListener.contentWindow);}else{_addEvent('resize',_adResizeListener,_onResize);_onResize(null,_adResizeListener);}}_adStyle.type="text/css";if(_adStyle.styleSheet){_adStyle.styleSheet.cssText=style;}else{_adStyle.appendChild(document.createTextNode(style))}_adRoot.appendChild(_adStyle);var _adPlayClicked=false;var _adPlayClick=function(){if(_initPlayState()){if(_autoplay===false){_autoplay=true;_adVideo.play();_waitGoogle();}else{if(_adCurrent&&_adCurrent!=='non-linear'){_adsManager.resume();}else{_adVideo.play();}}}else if(_adCurrent&&_adCurrent!=='non-linear'){_adsManager.pause();}else{_adVideo.pause();}_adPlayClicked=true;};if(_visibility&&_autoplay&&_visibility>_getVisibility()){while(1){_addEvent('scroll',_win,function(){if(_adPlayClicked){return true;}if(_visibility<=_getVisibility()){_adPlayClick();}});if(_win===_win.parent){break;}_win=_win.parent;}_adPlay.className='ad-play paused';_autoplay=false;}_addEvent('click',_adSound,function(){_volume=_initSoundState();if(_adsManager){_adsManager.setVolume(_volume);}});_addEvent('click',_adPlay,_adPlayClick);if(typeof _onInit==='function'){_onInit.call(_self,_adRoot);}};this.supportVideo=function(){return void 0!==document.createElement('video').canPlayType;};this.play=function(options,autoplay){if(typeof autoplay!=='undefined'){_autoplay=autoplay;}_setOptions(options);if(_events.length>0){if(typeof _onEvent==='function'){_events.forEach(function(event){_onEvent.call(_self,event,0);});}}if(_fail===false){_waitGoogle();}};this.getDom=function(){return _adRoot;};this.skip=function(){if(_inited&&_adsManager){if(_adCurrent&&_adCurrent!=='non-linear'){_initPlayState(false);_adVideo.play();}_adsManager.destroy();_adsManager=null;}};this.isMuted=function(){return _volume===0;};this.hasAd=function(){return!!_vast};this.destroy=function(hard){if(_adsManager){_adsManager.destroy();}if(_adsLoader){_adsLoader.destroy();}if(_adDisplayContainer){_adDisplayContainer.destroy();}if(_adRoot&&(typeof hard==='undefined'||hard===true)){_adRoot.innerHTML='';}};_events.push('playerRun');if(_adVideo){if(!this.supportVideo()){_events.push('playerNotSupported');_fail=true;return this;}var _init=function(autoplay,mute){_initDom(autoplay,mute);_appendScript('//imasdk.googleapis.com/js/sdkloader/ima3.js',false);};try{var played=_adVideo.play();if(typeof played==='undefined'){_adVideo.pause();_init(true,false);}else{played.then(function(){_adVideo.pause();_init(true,false);}).catch(function(){_adVideo.volume=0;_adVideo.muted=true;_adVideo.play().then(function(){_adVideo.pause();_init(true,true);}).catch(function(){_adVideo.pause();_adVideo.volume=1;_adVideo.muted=false;_init(false,false);});});}}catch(e){if(typeof _onError==='function'){_onError.call(_self,e.message||e);}_fail=true;}}else{_events.push('playerDomFail');_fail=true;}return this;}function SapeRtbClientCode(srtbid,srtbuid,isNG,rfrsh,srtbdmn,ads,constData){this.srtbid=srtbid;this.srtbuid=srtbuid;this.isNG=isNG;this.rfrsh=rfrsh;this.srtbdmn=srtbdmn;this.ads=ads;for(var property in constData){if(constData.hasOwnProperty(property)){this[property]=constData[property];}}this.common=new SapeRtbCommon();this.flags={};this.callback={};this.scripts={};this.eventListeners={};this.scrollListenerHash=false;this.currentHref=[];this.version='201912061317';this.useProxy=typeof window.srtb_proxy==='undefined'?false:window.srtb_proxy;this.useProxyAllowed=this.sapeRTBAllowedProxyUrl(["www.acint.net\/pxl\/","www.acint.net\/rtbw\/","cdn-rtb.sape.ru\/rtb-b\/u\/pxl\/","cdn-rtb.sape.ru\/js\/videojs\/"]);this.useProxyTracking=!!(this.useProxy&&parseInt(this.sapeRTBGetCookie('proxy_tracking')));this.listener_added=false;this.keywords=this.common.get_keywords();this.href=this.common.get_href();this.sid=typeof window.srtb_sid!=='undefined'?window.srtb_sid:this.common.generateSessionId();this.previousErrorHandler=null;this.visibilityHidden=false;this.visibilityChange=false;this.visibilityWindow=true;if(typeof document.hidden!=='undefined'){this.visibilityHidden='hidden';this.visibilityChange='visibilitychange';}else if(typeof document.msHidden!=='undefined'){this.visibilityHidden='msHidden';this.visibilityChange='msvisibilitychange';}else if(typeof document.webkitHidden!=='undefined'){this.visibilityHidden='webkitHidden';this.visibilityChange='webkitvisibilitychange';}return this;}SapeRtbClientCode.prototype.getCurrentHref=function(field){if(typeof field==='undefined'){field='href'}if(typeof this.currentHref[field]==='undefined'){this.currentHref[field]='';try{this.currentHref[field]=top.location[field];}catch(err){}if(this.currentHref[field]===''){var wnd=window;do{try{if(typeof wnd.document.referrer!=='undefined'){if(field==='host'){this.currentHref[field]=wnd.document.referrer.match(/:\/\/(.[^/]+)/)[1];}else{this.currentHref[field]=wnd.document.referrer;}}}catch(err){}if(wnd){wnd=wnd.parent;}}while(wnd&&wnd!==wnd.parent);}if(this.currentHref[field]===''){this.currentHref[field]=window.location[field];}}return this.currentHref[field];};SapeRtbClientCode.prototype.sapeRTBpostMessage=function(msg){var win=window;if(typeof msg==='object'){msg=JSON.stringify(msg);}win.postMessage(msg,'*');while(this.common.objectIsEqual(win,win.parent)===false){win=win.parent;win.postMessage(msg,'*');}};SapeRtbClientCode.prototype.sapeRTBSetFlag=function(flag,value){this.flags[flag]=value;};SapeRtbClientCode.prototype.sapeRTBGetFlag=function(flag){if(typeof this.flags[flag]!=='undefined'){return this.flags[flag];}return false;};SapeRtbClientCode.prototype.sapeRTBDelFlag=function(flag){if(typeof this.flags[flag]!=='undefined'){delete this.flags[flag];}};SapeRtbClientCode.prototype.sapeRTBSetCallback=function(type,callback){var id=(new Date().getTime())+'-'+parseInt(Math.random()*10000),sapeRtbHandler=window.sapeRtbHandler_96119;sapeRtbHandler.callback[id]={type:type,callback:callback};return id;};SapeRtbClientCode.prototype.sapeRTBCallbackById=function(id,params){var sapeRtbHandler=window.sapeRtbHandler_96119;if(typeof sapeRtbHandler.callback[id]!=='undefined'){var callback=sapeRtbHandler.callback[id].callback;delete sapeRtbHandler.callback[id];callback(params);}};SapeRtbClientCode.prototype.sapeRTBSetEventListener=function(event,name,callback){if(typeof this.eventListeners[event]==='undefined'){this.eventListeners[event]={};}if(typeof this.eventListeners[event][name]==='undefined'){this.eventListeners[event][name]=callback;}};SapeRtbClientCode.prototype.sapeRTBDelEventListener=function(event,name){if(typeof this.eventListeners[event]!=='undefined'){if(typeof this.eventListeners[event][name]!=='undefined'){delete this.eventListeners[event][name];}}};SapeRtbClientCode.prototype.sapeRTBSetMessageListener=function(name,callback){this.sapeRTBSetEventListener('message',name,callback);};SapeRtbClientCode.prototype.sapeRTBDelMessageListener=function(name){this.sapeRTBDelEventListener('message',name);};SapeRtbClientCode.prototype.sapeRTBCallbackByType=function(type,params){var sapeRtbHandler=window.sapeRtbHandler_96119,list=[];for(var id in sapeRtbHandler.callback){if(sapeRtbHandler.callback.hasOwnProperty(id)){if(sapeRtbHandler.callback[id].type===type){list.push(id);}}}list.forEach(function(id){sapeRtbHandler.sapeRTBCallbackById(id,params);});};SapeRtbClientCode.prototype.sapeRTBClosePopup=function(event){this.parentNode.style.display='none';var id=this.parentNode.id,pid=(id==''?0:parseInt(id.replace('SRTB_',''))),ad;if(pid>0){for(var b=0;b<window.sapeRtbHandler_96119.ads.length;b++){ad=window.sapeRtbHandler_96119.ads[b];if(window.sapeRtbHandler_96119.ads[b].id==pid){window.sapeRtbHandler_96119.ads[b].popup_closed=true;}}}this.parentNode.parentNode.removeChild(this.parentNode);if(event.preventDefault){event.preventDefault();}return false;};SapeRtbClientCode.prototype.sapeRTBCloseFloat=function(event){this.parentNode.parentNode.style.display='none';this.parentNode.parentNode.parentNode.removeChild(this.parentNode.parentNode);if(event.preventDefault){event.preventDefault();}return false;};SapeRtbClientCode.prototype.sapeRTBGetBranchNumber=function(data,branch){for(var key in data.branches){if(data.branches.hasOwnProperty(key)){if(data.branches[key].join(',')==branch){return key;}}}};SapeRtbClientCode.prototype.catchRedirect=function(){if('onbeforeunload' in window){this.common.addEventListenerCrossBrowser(window,'beforeunload',function(){var b,sapeRtbHandler=window.sapeRtbHandler_96119;for(b=0;b<sapeRtbHandler.ads.length;b++){sapeRtbHandler.sapeRTBTrackingAdTime(sapeRtbHandler.ads[b]);}});}};SapeRtbClientCode.prototype.sapeRTBStartBranch=function(data){return this.sapeRTBDrawBanner(data,data.branches[data.branch_number][data.partner_number]);};SapeRtbClientCode.prototype.branchCodeStd=function(ad,branches){ad.branch_number=this.sapeRTBGetBranchNumber(ad,branches);if(typeof ad.partner_number=='undefined'){ad.partner_number=0;}else if(!ad.done){ad.partner_number++;}if(ad.branches[ad.branch_number][ad.partner_number]==this.sas){if(typeof ad.branches_data[ad.branch_number]!='undefined'&&typeof ad.branches_data[ad.branch_number].sc_id!='undefined'){if(ad.mobile&&!this.common.sapeRTBisMobile()){return false;}if(ad.popup){if(typeof window.sapeRtbBannerPopupCount==="undefined"){window.sapeRtbBannerPopupCount={length:0};}if(window.sapeRtbBannerPopupCount.hasOwnProperty(ad.id)||window.sapeRtbBannerPopupCount.length>=2){ad.done=1;return false;}window.sapeRtbBannerPopupCount[ad.id]=1;window.sapeRtbBannerPopupCount.length++;}this.sasIds.push(ad.branches_data[ad.branch_number].sc_id);this.sapeRTBTrackingCode(ad,1);ad.done=1;ad.sas_waiting=true;ad.current_partner=this.sas;var that=this;setTimeout(function(){that.sapeRTBSkipSas(ad.id);},5000);return true;}}else{var sectionData=ad;if(this.sapeRTBStartBranch(ad)){ad.done=1;ad.current_partner=sectionData.branches[ad.branch_number][sectionData.partner_number];return true;}else if(typeof sectionData.branches[sectionData.branch_number][sectionData.partner_number]==='undefined'){return true;}}return false;};SapeRtbClientCode.prototype.sapeRTBGetCookie=function(name){var matches=document.cookie.match(new RegExp("(?:^|; )"+('sape_rtb_'+name).replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,'\\$1')+"=([^;]*)"));if(matches){return decodeURIComponent(matches[1]);}return undefined;};SapeRtbClientCode.prototype.sapeRTBSetCookie=function(name,value,expires,path,domain){var props=['sape_rtb_'+name+'='+escape(value),'expires='+(new Date(new Date().getTime()+expires*1000)).toUTCString(),'path='+(typeof path==='undefined'?'/':path)];if(typeof domain!=='undefined'){props.push('domain='+domain);}document.cookie=props.join('; ');};SapeRtbClientCode.prototype.sapeRTBAllowedProxyUrl=function(src){if(this.useProxy){return src;}return[];};SapeRtbClientCode.prototype.sapeRTBGetProxyUrl=function(src){var test=false;if(this.useProxy!==false){this.useProxyAllowed.forEach(function(url){if(src.replace(/^(?:https?)?:?\/\//,'').substr(0,url.length)===url){test=true;}});}if(test){src=this.useProxy+'q='+window.btoa(src);}return src;};SapeRtbClientCode.prototype.sapeRTBProxyTracking=function(src,useProxy){var self=this,pixel=document.createElement('img'),proxy=!!(this.useProxy&&((typeof useProxy!=='undefined'&&useProxy===true)||this.useProxyTracking===true));pixel.alt="";pixel.src=src;pixel.style.width='1px';pixel.style.height='1px';pixel.style.position='fixed';pixel.style.left='-100px';pixel.style.top='-100px';pixel.style.opacity=0;if(proxy){pixel.src=this.sapeRTBGetProxyUrl(pixel.src);}this.common.addEventListenerCrossBrowser(pixel,'error',function(){if(self.useProxy){if(self.useProxyTracking!==true){if(self.useProxyTracking===false){self.useProxyTracking=0;}self.useProxyTracking++;if(self.useProxyTracking>3){self.useProxyTracking=true;self.sapeRTBSetCookie('proxy_tracking',1,60);}}if(proxy===false){self.sapeRTBProxyTracking(src,true);}}self.common.nodeRemove(this);});this.common.addEventListenerCrossBrowser(pixel,'load',function(){self.common.nodeRemove(this);});if(document.body!=null){document.body.appendChild(pixel);}else if(document.getElementsByTagName('body').length){document.getElementsByTagName('body')[0].appendChild(pixel);}};SapeRtbClientCode.prototype.sapeRTBTrackingCode=function(sectionData,status,force){if(this.useProxy&&this.useProxyTracking===true){if(typeof sectionData.ad_wait_imp!=='undefined'){delete sectionData.ad_wait_imp;if(status==this.pix_noad){return;}this.sapeRTBTrackingCode(sectionData,this.pix_imp,true);if(status==this.pix_imp){return;}}else if(status==this.pix_imp&&(typeof force==='undefined'||force===false)){sectionData.ad_wait_imp=true;return;}}var partner=sectionData.branches[sectionData.branch_number][sectionData.partner_number-(status==this.pix_noad?1:0)],date=new Date(),src,section;if(partner>0&&sectionData.sections[sectionData.branch_number]){section=sectionData.sections[sectionData.branch_number][sectionData.partner_number-(status==this.pix_noad?1:0)];}else{section=0;}if(typeof partner==='undefined'){return;}src='//www.acint.net/pxl/'+status+'?dp='+partner+'&id='+this.srtbid+'.'+sectionData.id+'.'+section+'&sid='+this.sid;if(partner==this.tml){src+='&slot='+sectionData.tml_slot;}else if(partner==this.tml_cpm){src+='&slot='+sectionData.tml_cpm_slot;}src+='&ref='+encodeURIComponent(this.getCurrentHref())+'&r='+Math.round(date.getTime()/1000);this.sapeRTBProxyTracking(src);if(status===this.pix_imp&&(sectionData.type==this.type_video||sectionData.type==this.type_inpage)){sectionData.ad_time_imp=date;}if(status===this.pix_ad){if(typeof sectionData.ad_time_imp!=='undefined'){var adWait=Math.floor((date-sectionData.ad_time_imp)/1000);if(adWait>1){this.sapeRTBTrackingState('srtb','adWait',partner,section,sectionData.id,adWait);}}if(typeof sectionData.ad_shown==='undefined'){sectionData.ad_shown={};}sectionData.ad_shown[partner]=true;}};SapeRtbClientCode.prototype.sapeRTBTrackingEvent=function(fn,dp,ev){this.sapeRTBProxyTracking('//www.acint.net/rtbw/'+fn+'?dp='+dp+'&cd='+this.common.encodeUriParam(JSON.stringify(ev))+'&sid='+this.sid+'&ref='+encodeURIComponent(this.getCurrentHref())+'&r='+Math.round((new Date()).getTime()/1000));};SapeRtbClientCode.prototype.sapeRTBTrackingState=function(type,event,partnerId,sectionId,placeId,code){this.sapeRTBTrackingEvent(1,typeof partnerId==='undefined'?0:partnerId,{st:parseInt(this.srtbid),sc:parseInt(typeof sectionId==='undefined'?0:sectionId),pl:parseInt(typeof placeId==='undefined'?0:placeId),ev:event,et:type,ec:typeof code==='undefined'?0:parseInt(code)});};SapeRtbClientCode.prototype.sapeRTBTrackingAdTime=function(ad,partner,section){if(typeof ad.ad_time_imp!=='undefined'){if(typeof partner==='undefined'){partner=ad.branches[ad.branch_number][ad.partner_number];}if(partner>0&&ad.sections[ad.branch_number]){if(typeof section==='undefined'){section=ad.sections[ad.branch_number][ad.partner_number];}}else{section=0;}var adTime=Math.floor(((new Date())-ad.ad_time_imp)/1000);if(adTime>0){this.sapeRTBTrackingState('srtb','adTime',partner,section,ad.id,Math.min(3600,adTime));}delete ad.ad_time_imp;}};SapeRtbClientCode.prototype.sapeRTBTrackJsErrors=function(msg,url,line,col,error){if(typeof error==='object'&&error.stack!=='undefined'){error=error.stack;}this.sapeRTBTrackingEvent(2,0,{st:parseInt(this.srtbid),ln:line||null,co:col||null,ul:url||null,mg:msg,er:error||null});if(this.previousErrorHandler){return this.previousErrorHandler(msg,url,line,col,error);}};SapeRtbClientCode.prototype.sapeRTBAfterImp=function(data,partner,dv){if((partner!=16||typeof data.htmlData==='undefined')&&(partner!=307||typeof data.btw_cpm_floor_cpm==='undefined')&&(partner!=407||typeof data.btw2_cpm_floor_cpm==='undefined')){this.sapeRTBTrackingCode(data,this.pix_imp);}var that=this;if((partner!=16||typeof data.htmlData!=='undefined')&&(partner!=307||typeof data.btw_cpm_floor_cpm!=='undefined')&&(partner!=407||typeof data.btw2_cpm_floor_cpm!=='undefined')){if(this.rfrsh&&partner!=0&&data.type==this.type_banner){var rfrsh=true;if(typeof data.rfrsh!=='undefined'&&typeof data.rfrsh[partner]!=='undefined'){rfrsh=data.rfrsh[partner];}if(rfrsh){var fn=function(partnerId,data){if(partnerId==data.current_partner){that.sapeRTBpostMessage({provider:'sRTBMsg',act:'rfrsh',partner_id:partnerId,sectionId:data.id});}delete data.timer_rfrsh;};if(typeof data.timer_rfrsh!=='undefined'&&data.timer_rfrsh){clearTimeout(data.timer_rfrsh);delete data.timer_rfrsh;}data.timer_rfrsh=setTimeout(fn,20000,partner,data);}if(typeof data.shown==='undefined'){data.shown=[];}data.shown.push(partner);}setTimeout(function(){that.validateElementVis(data.id);},3000);}if(partner!=0&&typeof this.eventListeners.visibility!=='undefined'&&typeof this.eventListeners.visibility[data.type]!=='undefined'){var onscroll='visibility_'+data.id+'_'+partner;if(typeof data.visibility==='undefined'){this.sapeRTBTrackingState('srtb','vis0',14,0,data.id,0);data.visibility={0:[]};}if(typeof data.visibility[partner]==='undefined'){var hash=false,scrolled=false,scroll=function(e,lite){if(typeof data.branches[data.branch_number][data.partner_number]==='undefined'||data.branches[data.branch_number][data.partner_number]!=partner){return false;}if(typeof lite!=='undefined'&&lite===true&&scrolled===true){return false;}var state=that.eventListeners.visibility[data.type].call(that,dv,data.visibility[partner]||0,data);if(state.hash!==false){var wait=function(h,v,section){if(h===hash&&data.branches[data.branch_number][data.partner_number]==partner){if(v===100){that.sapeRTBDelEventListener('scroll',onscroll);}var event=v===100?'100':'50';if(data.visibility[0].indexOf(event)<0){data.visibility[0].push(event);that.sapeRTBTrackingState('srtb','vis'+event,14,0,data.id,0);}that.sapeRTBTrackingState('srtb','view'+event,partner,section,data.id,0);data.visibility[partner]=v;}};hash=state.hash;if(data.sections.length>0){if(state.wait>0){setTimeout(wait,state.wait,state.hash,state.v,data.sections[data.branch_number][data.partner_number]);}else{wait(state.hash,state.v,data.sections[data.branch_number][data.partner_number]);}}}if(state.clean){that.sapeRTBDelEventListener('scroll',onscroll);}scrolled=true;return true;};this.sapeRTBSetEventListener('scroll',onscroll,scroll);data.visibility[partner]=0;setTimeout(scroll,1000,null,true);}}if(typeof window.srtb_current_partners=='undefined'){window.srtb_current_partners={};}if(typeof window.srtb_current_partners[data.id]=='undefined'){window.srtb_current_partners[data.id]=[];}window.srtb_current_partners[data.id].push(partner);};SapeRtbClientCode.prototype.validateCurrentHost=function(){var urls=[],result=false,currentHost=this.getCurrentHref('host');if(currentHost){if(this.srtbdmn===false){result=true;}else{urls.push(currentHost);for(var b=0;b<urls.length;b++){var url=urls[b];for(var s=0;s<this.srtbdmn.length;s++){var srtbdmn=this.srtbdmn[s];if(url===srtbdmn||url==='www.'+srtbdmn||this.common.strEndsWith(url,'.'+srtbdmn)){result=true;break;}}}}if(result===false){this.sapeRTBTrackJsErrors('Cannot run code for site '+this.srtbid+' on domain '+currentHost,'');}}return result;};SapeRtbClientCode.prototype.validateElementVis=function(elementId){var el=document.getElementById('SRTB_'+elementId);try{if(el&&(el.offsetWidth==0||el.offsetHeight==0)){this.sapeRTBTrackJsErrors('Place empty offset for ID='+el.id,'');}}catch(e){}};SapeRtbClientCode.prototype.runSasPlaces=function(){var result=1,w=window;if(this.srtbid>0&&this.sasIds.length>0){var scids=this.sasIds.join();if(scids!==''){this.runSasPlacesRequest(scids,1);result=0;}}return result;};SapeRtbClientCode.prototype.runSasPlacesRequest=function(scids,allimps){var self=this,fl=0,win=window,u=null,script=document.createElement('script');try{u=encodeURIComponent(window.top.location.toString());}catch(e){}while(this.common.objectIsEqual(win,win.top)===false){win=win.parent;fl++;}var src='//ssp-rtb.sape.ru/data/?callback=sapeRTBreadResponse_96119&srtbid='+this.srtbid+'&scids='+scids+'&sx='+(window.innerWidth||window.document.documentElement.clientWidth||window.document.body.clientWidth)+'&sy='+(window.innerHeight||window.document.documentElement.clientHeight||window.document.body.clientHeight)+'&ref='+encodeURIComponent(window.document.referrer)+(u!==null?'&u='+u:'')+'&allimps='+allimps+'&fl='+fl+'&tz='+this.common.encodeUriParam(this.common.getTimeZoneOffsetIso8601());if(typeof window.sapeRTBreadResponse_96119==='undefined'){window.sapeRTBreadResponse_96119=function(response){if(typeof response!=='object'||response===null){return;}try{for(var b=0;b<self.ads.length;b++){var data=self.ads[b],responseData=response[data.id];if(responseData!==undefined&&responseData!==null&&data.sas_waiting){if(responseData===false){data.sas_waiting=false;self.sapeRTBpostMessage({provider:'sRTBMsg',act:'showNext',16:partner_id,sectionId:data.id});return;}if(typeof responseData.ht!=='undefined'){data.htmlAuto=true;data.htmlData=responseData.ht;}else{data.htmlData=responseData.dt;}if(typeof responseData.u!=='undefined'&&responseData.u){if(typeof data.rfrsh==='undefined'){data.rfrsh={};}data.rfrsh[16]=false;}if(data.popup&&data.type!=self.type_video&&document.getElementById('SRTB_'+data.id)){document.getElementById('SRTB_'+data.id).parentNode.removeChild(document.getElementById('SRTB_'+data.id));}if(typeof data.lock_by_flag!=='undefined'){self.sapeRTBDelFlag(data.lock_by_flag);}if(self.sapeRTBDrawBanner(data,16)){self.ads[b].current_partner=16;}}}}catch(e){self.sapeRTBTrackJsErrors(e.message,null,null,null,(e&&e.stack)?e:new Error(e.message));}}}script.src=src;script=this.addScriptLoadListener(script,this.sas,'partnerId');document.body.appendChild(script);};SapeRtbClientCode.prototype.sapeRTBInsertStubElement=function(p,data){var stubs=new Array(),has_stub_partner=false;if(data.partner_number==0){if(typeof data.admin_stubs!=='undefined'){stubs=data.admin_stubs;}else if(typeof data.stubs!=='undefined'){stubs=data.stubs;}}else{for(var i=0;i<data.branches.length;i++){if(data.branches[i][0]==0){has_stub_partner=true;}}if(typeof data.admin_stubs!=='undefined'&&!has_stub_partner){stubs=stubs.concat(data.admin_stubs);}if(typeof data.stubs!=='undefined'){stubs=stubs.concat(data.stubs);}}if(stubs.length==0){return 2;}var stub=stubs[Math.floor(Math.random()*stubs.length)];if(stub.async==1){p.innerHTML=this.common.decode64(stub.html);this.common.evalNode(p);}else{this.sapeRTBInsertStubSyncElement(p,stub.html,data.w,data.h);}return 0;};SapeRtbClientCode.prototype.sapeRTBInsertStubSyncElement=function(p,html,width,height){var id='FRAME_'+p.id;if(typeof window.sapeDrawUserBanner_96119==='undefined'){window.sapeDrawUserBanner_96119=function(n,id,html){var d=false;try{if(document.all&&!window.opera){d=window.frames[id].document;}else if(document.getElementById){d=document.getElementById(id).contentDocument;}}catch(e){}if(n>0){if(d){d.open();d.write(html);d.close();}else{setTimeout(sapeDrawUserBanner_96119,100,--n,id,html);}}};}p.appendChild(this.common.createIFrame(id,width,height));sapeDrawUserBanner_96119(10,id,this.common.decode64(html));return 0;};SapeRtbClientCode.prototype.addScriptToDocument=function(src,ad,attr){var self=this,callback=function(){if(typeof self.scripts[src]==='undefined'){return false;}var call=false;switch(self.scripts[src].state){case 'load':call=function(a){if(typeof a.onLoad==='function'){a.onLoad();}else if(self.useProxy){self.sapeRTBpostMessage({provider:'sRTBMsg',act:'loaded',sectionId:a.ad.id});}};break;case 'error':call=function(a){if(typeof a.onError==='function'){a.onError();}else{self.sapeRTBpostMessage({provider:'sRTBMsg',act:'showNext',sectionId:a.ad.id});}};break;}if(call!==false){self.scripts[src].ad.forEach(function(a){call(a);});self.scripts[src].ad=[];}return true;};var onError,onLoad;for(var i in attr){if(attr.hasOwnProperty(i)){if(i==='onError'){onError=attr[i];}if(i==='onLoad'){onLoad=attr[i];}}}if(typeof this.scripts[src]==='undefined'){var script=document.createElement('script');script.src=src;for(var key in attr){if(attr.hasOwnProperty(key)){if(key!=='onError'&&key!=='onLoad'){script.setAttribute(key,attr[key]);}}}this.scripts[src]={state:'pending',ad:[{ad:ad,onError:onError,onLoad:onLoad}]};this.common.addEventListenerCrossBrowser(script,'load',function(){self.scripts[src].state='load';callback();});this.common.addEventListenerCrossBrowser(script,'error',function(){self.scripts[src].state='error';callback();});(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(script);}else{this.scripts[src].ad.push({ad:ad,onError:onError,onLoad:onLoad});}setTimeout(function(){callback();},0);return script;};SapeRtbClientCode.prototype.addScriptLoadListener=function(script,id,type,onError){if(type==null){type='sectionId';}script.setAttribute('data-srtb-id',id);script.setAttribute('data-srtb-type',type);if(script.dataset){script.dataset.srtbId=id;script.dataset.srtbType=type;}var self=this,postRtbMsg=function(t,act,error){var msg={provider:'sRTBMsg',act:act};if(t.dataset){msg[t.dataset.srtbType]=t.dataset.srtbId;if(error){t.dataset.srtbError=1;}}else{msg[t.getAttribute('data-srtb-type')]=t.getAttribute('data-srtb-id');if(error){t.setAttribute('data-srtb-error',1);}}self.sapeRTBpostMessage(msg);};this.common.addEventListenerCrossBrowser(script,'error',function(){if(typeof onError==='function'){onError();}else{postRtbMsg(script,'showNext',true);}});if(this.useProxy){this.common.addEventListenerCrossBrowser(script,'load',function(){postRtbMsg(script,'loaded',false);});}return script;};SapeRtbClientCode.prototype.messageListener=function(e){var eventData;try{eventData=JSON.parse(e.data);}catch(err){eventData=e.data;}var origin=e.origin||(e.originalEvent?e.originalEvent.origin:'');try{window.sapeRtbHandler_96119.messageListenerProcess(origin,eventData);}catch(e){window.sapeRtbHandler_96119.sapeRTBTrackJsErrors(e.message,null,null,null,(e&&e.stack)?e:new Error(e.message));}};SapeRtbClientCode.prototype.messageListenerProcess=function(origin,eventData){var b=0,el,ad,w=window,sapeRtbHandler=w.sapeRtbHandler_96119;if(typeof sapeRtbHandler.eventListeners.message!=='undefined'){for(var listener in sapeRtbHandler.eventListeners.message){if(sapeRtbHandler.eventListeners.message.hasOwnProperty(listener)){var stop=sapeRtbHandler.eventListeners.message[listener](origin,eventData);if(stop===true){return listener;}}}}if(typeof eventData!=='undefined'&&eventData!==null&&eventData.provider!==undefined&&eventData.provider!==null){if(eventData.provider==='between'&&eventData.section&&eventData.errors!==undefined&&eventData.errors.length){for(b=0;b<sapeRtbHandler.ads.length;b++){ad=sapeRtbHandler.ads[b];if(typeof ad.branches_data!=='undefined'&&typeof ad.branches_data[ad.branch_number]!=='undefined'&&(ad.branches_data[ad.branch_number].btw_id==eventData.section||ad.branches_data[ad.branch_number].btw2_id==eventData.section)){var partner_id=ad.branches_data[ad.branch_number].btw_id==eventData.section?sapeRtbHandler.btw:sapeRtbHandler.btw2;w.postMessage(JSON.stringify({provider:'sRTBMsg',act:'showNext',sectionId:ad.id,partner_id:partner_id}),'*');}}return 'between';}if(eventData.provider==='sRTBMsg'){if(eventData.act!==undefined&&eventData.act!==null){if(eventData.act==='showNext'||eventData.act==='rfrsh'||eventData.act==='loaded'){if(typeof eventData.partnerId!=='undefined'){eventData.partner_id=eventData.partnerId;}for(b=0;b<sapeRtbHandler.ads.length;b++){ad=sapeRtbHandler.ads[b];if(typeof ad.branches_data==='undefined'){continue;}if((typeof eventData.sectionId!=='undefined'&&ad.id==eventData.sectionId)||(typeof eventData.sectionId==='undefined'&&typeof eventData.partner_id!=='undefined'&&ad.current_partner==eventData.partner_id)){if(typeof ad.partner_number=='undefined'){return;}if(typeof eventData.partner_id!='undefined'&&eventData.partner_id!=ad.current_partner){return;}if(eventData.act==='loaded'){if(typeof ad.ad_wait_imp!=='undefined'){sapeRtbHandler.sapeRTBTrackingCode(ad,sapeRtbHandler.pix_imp,true);}return;}if(eventData.act==='rfrsh'){if(typeof ad.rfrshd==='undefined'){ad.rfrshd=[];}if(ad.branches[ad.branch_number][ad.partner_number]&&ad.rfrshd.indexOf(ad.branches[ad.branch_number][ad.partner_number])===-1){ad.rfrshd.push(ad.branches[ad.branch_number][ad.partner_number]);sapeRtbHandler.sapeRTBTrackingCode(ad,sapeRtbHandler.pix_rfrsh);}if((typeof ad.branches[ad.branch_number][ad.partner_number+1]=='undefined'||ad.branches[ad.branch_number][ad.partner_number+1]==0)){if((!ad.popup&&ad.type!=sapeRtbHandler.type_video)||!ad.popup_closed){sapeRtbHandler.rtt(ad,0,true,b);}return;}}var was_shown=false,noad=true;if(typeof eventData.reason!=='undefined'&&eventData.reason==='scriptError'){sapeRtbHandler.sapeRTBTrackingCode(ad,sapeRtbHandler.pix_err);}while(!was_shown){if(typeof ad.branches[ad.branch_number][ad.partner_number]==='undefined'){break;}ad.partner_number++;if(noad){if(typeof ad.lock_by_flag!=='undefined'){sapeRtbHandler.sapeRTBDelFlag(ad.lock_by_flag);setTimeout(sapeRtbHandler.sapeRTBCallbackByType,1,ad.lock_by_flag);ad.lock_by_flag=false;}if(typeof ad.shutdown!=='undefined'){sapeRtbHandler.sapeRTBCallbackByType(ad.shutdown);ad.shutdown=false;}if(eventData.act!=='rfrsh'){var current_partner=ad.branches[ad.branch_number][ad.partner_number-1];if(typeof current_partner==='undefined'){return;}if(typeof ad.shown!=='undefined'&&(ad.shown.indexOf(current_partner)+1)){ad.shown.splice(ad.shown.indexOf(current_partner),1);}if(typeof w.srtb_current_partners!='undefined'&&typeof w.srtb_current_partners[ad.id]!='undefined'&&w.srtb_current_partners[ad.id].indexOf(current_partner)!==-1){w.srtb_current_partners[ad.id].splice(w.srtb_current_partners[ad.id].indexOf(current_partner),1);}if(typeof ad.ad_shown==='undefined'||typeof ad.ad_shown[current_partner]==='undefined'||ad.ad_shown[current_partner]===false){sapeRtbHandler.sapeRTBTrackingCode(ad,sapeRtbHandler.pix_noad);}sapeRtbHandler.sapeRTBTrackingAdTime(ad,current_partner,ad.sections[ad.branch_number][ad.partner_number-1]);}noad=false;}if(typeof ad.branches[ad.branch_number][ad.partner_number]==='undefined'){el=document.getElementById('SRTB_'+eventData.sectionId);if(el){el.style.display='none';el.setAttribute('data-hide','1');}break;}el=document.getElementById('SRTB_'+ad.id);if(el){if((!ad.popup||ad.type==sapeRtbHandler.type_video)&&!ad.mobile&&!ad.float){if(!(ad.branches[ad.branch_number][ad.partner_number]==0&&eventData.act==='showNext')||typeof ad.shown==='undefined'||ad.shown.length===0){var new_el=el.cloneNode(false);sapeRtbHandler.common.insertAfter(el,new_el);if(ad.type==sapeRtbHandler.type_inpage){new_el.style.minHeight=el.clientHeight+'px';}new_el.style.height='';}}else if(ad.float){sapeRtbHandler.float_open=0;if(typeof sapeRtbHandler.eventListeners.float!=='undefined'){for(var listener in sapeRtbHandler.eventListeners.float){if(sapeRtbHandler.eventListeners.float.hasOwnProperty(listener)){sapeRtbHandler.eventListeners.float[listener](ad);}}}}else if(ad.mobile){if(typeof sapeRtbHandler.eventListeners.mobile!=='undefined'){for(var listener in sapeRtbHandler.eventListeners.mobile){if(sapeRtbHandler.eventListeners.mobile.hasOwnProperty(listener)){sapeRtbHandler.eventListeners.mobile[listener](ad);}}}}el.style.display='none';el.id='SRTB_'+ad.id+'_'+ad.branches[ad.branch_number][ad.partner_number-1];}if(ad.branches[ad.branch_number][ad.partner_number]==0&&(typeof ad.shown!=='undefined'&&ad.shown.length!==0)){el=document.getElementById('SRTB_'+ad.id+'_'+ad.shown[0]);if(el){el.style.display='block';if(ad.shown.length>1){var rtt=function(partnerId,ad){if(partnerId===ad.current_partner){sapeRtbHandler.sapeRTBpostMessage({provider:'sRTBMsg',act:'rtt',partner_id:partnerId,sectionId:ad.id});}delete ad.timer_rtt;};if(typeof ad.timer_rtt!=='undefined'&&ad.timer_rtt){clearTimeout(ad.timer_rtt);delete ad.timer_rtt;}ad.timer_rtt=setTimeout(rtt,20000,ad.shown[0],ad);}ad.current_partner=ad.shown[0];}return;}was_shown=sapeRtbHandler.sapeRTBDrawBanner(ad,ad.branches[ad.branch_number][ad.partner_number]);if(ad.type==sapeRtbHandler.type_video||ad.type==sapeRtbHandler.type_inpage){el.innerHTML='';}if(was_shown===false){eventData={act:'showNext',sectionId:ad.id};}ad.current_partner=ad.branches[ad.branch_number][ad.partner_number];}}}}else if(eventData.act=='rtt'){for(b=0;b<sapeRtbHandler.ads.length;b++){ad=sapeRtbHandler.ads[b];if(typeof ad.branches_data!=='undefined'&&typeof eventData.sectionId!=='undefined'&&ad.id==eventData.sectionId&&typeof ad.shown!=='undefined'){sapeRtbHandler.rtt(ad,ad.shown.indexOf(ad.current_partner),false,b);}}}else if(eventData.act=='adsLoaded'){for(b=0;b<sapeRtbHandler.ads.length;b++){if(sapeRtbHandler.ads[b].id==eventData.sectionId){sapeRtbHandler.sapeRTBTrackingCode(sapeRtbHandler.ads[b],sapeRtbHandler.pix_ad);}}}else if(eventData.act=='showNextGoogle'){var frames=w.document.getElementsByTagName('iframe');for(var key in frames){if(Object.prototype.hasOwnProperty.call(frames,key)){try{if(frames[key].contentWindow.frames[eventData.windowName]!==undefined){var elem=frames[key].parentNode,matches;while((matches=elem.id.match(/^SRTB_(\d+)$/))==null&&elem){elem=elem.parentNode;}sapeRtbHandler.sapeRTBpostMessage({provider:'sRTBMsg',act:'showNext',sectionId:matches[1]});break;}}catch(e){}}}}}return eventData.act;}}else{var close_pics=[];if(document.getElementsByClassName){close_pics=document.getElementsByClassName('SRTB_CLOSE');}else if(document.querySelectorAll){close_pics=document.querySelectorAll('.SRTB_CLOSE');}for(var index=0;index<close_pics.length;index++){close_pics[index].style.display="block";}}return false;};SapeRtbClientCode.prototype.scrollListener=function(e){var self=window.sapeRtbHandler_96119,hash=(new Date().getTime())+'-'+parseInt(Math.random()*10000),run=function(){if(hash===self.scrollListenerHash&&typeof self.eventListeners.scroll!=='undefined'){for(var event in window.sapeRtbHandler_96119.eventListeners.scroll){if(window.sapeRtbHandler_96119.eventListeners.scroll.hasOwnProperty(event)){window.sapeRtbHandler_96119.eventListeners.scroll[event](e);}}}};self.scrollListenerHash=hash;setTimeout(run,100);};SapeRtbClientCode.prototype.visibilityListener=function(){window.sapeRtbHandler_96119.visibilityWindow=!document[window.sapeRtbHandler_96119.visibilityHidden];window.sapeRtbHandler_96119.scrollListener();};SapeRtbClientCode.prototype.rtt=function(ad,rtt_pos,start,b){if(typeof ad.shown==='undefined'||ad.shown.length==0){return false;}var el,sapeRtbHandler=window.sapeRtbHandler_96119;if(ad.popup&&ad.popup_closed&&ad.type!=sapeRtbHandler.type_video){return false;}if(start){el=document.getElementById('SRTB_'+ad.id);if(el){el.style.display='none';el.id='SRTB_'+ad.id+'_'+ad.branches[ad.branch_number][ad.partner_number];}}else{el=document.getElementById('SRTB_'+ad.id+'_'+ad.current_partner);if(el){el.style.display='none';}rtt_pos++;if(rtt_pos===ad.shown.length){rtt_pos=0;}}el=document.getElementById('SRTB_'+ad.id+'_'+ad.shown[rtt_pos]);if(el){el.style.display='block';if(ad.shown.length>1){var rtt=function(partnerId,ad){if(partnerId===ad.current_partner){sapeRtbHandler.sapeRTBpostMessage({provider:'sRTBMsg',act:'rtt',partner_id:partnerId,sectionId:ad.id});}delete ad.timer_rtt;};if(typeof ad.timer_rtt!=='undefined'&&ad.timer_rtt){clearTimeout(ad.timer_rtt);delete ad.timer_rtt;}ad.timer_rtt=setTimeout(rtt,20000,ad.shown[rtt_pos],ad);ad.current_partner=ad.shown[rtt_pos];}}};SapeRtbClientCode.prototype.setErrorHandler=function(){var w=window;if(this.previousErrorHandler===null){this.previousErrorHandler=w.onerror;w.onerror=function(msg,url,line,col,error){var w=window;if(Object.prototype.hasOwnProperty.call(w,'sapeRtbHandler_96119')&&w.sapeRtbHandler_96119){var sapeRtbHandler=w.sapeRtbHandler_96119;sapeRtbHandler.sapeRTBTrackJsErrors(msg,url,line,col,error);}};}};SapeRtbClientCode.prototype.checkPlaceExists=function(b){var dv=document.getElementById('SRTB_'+window.sapeRtbHandler_96119.ads[b].id);if(dv){if(!dv.children||dv.children.length!==0){return;}window.sapeRtbHandler_96119.ads[b].done=0;window.sapeRtbHandler_96119.runOnReady();return;}setTimeout(window.sapeRtbHandler_96119.checkPlaceExists,1000,b);};SapeRtbClientCode.prototype.initEventListener=function(){if(!this.listener_added){this.listener_added=true;this.visibilityListener();this.common.addEventListenerCrossBrowser(window,'message',this.messageListener);this.common.addEventListenerCrossBrowser(window,'scroll',this.scrollListener);this.common.addEventListenerCrossBrowser(document,this.visibilityChange,this.visibilityListener);}};SapeRtbClientCode.prototype.runOnReady=function(){var w=window;this.common.setConsole();this.catchRedirect();try{this.initEventListener();this.sasIds=[];this.sapeRTBTrackingState('srtb','run',14,0,0,Math.floor((new Date()-new Date(2019,10,1))/86400000));for(var b=0;b<this.ads.length;b++){if(this.ads[b].done){continue;}if(!this.ads[b].free){var dv=document.getElementById('SRTB_'+this.ads[b].id);if(!dv&&parseInt(this.ads[b].type)===6){dv=document.getElementsByClassName('SRTB_INPAGE_'+this.ads[b].id);if(dv.length){continue;}}if(!dv){setTimeout(w.sapeRtbHandler_96119.checkPlaceExists,1000,b);this.ads[b].done=1;}else if(!dv.children||dv.children.length!==0){this.ads[b].done=1;}}else if(this.ads[b].check&&this.common.isInIframe()){this.ads[b].done=1;}}if(this.validateCurrentHost()==false){return false;}for(b=0;b<this.ads.length;b++){if(this.ads[b].done){continue;}var rnd=Math.floor(Math.random()*101),breaker=0;while(!this.runPlace(b,rnd)&&++breaker<100){}}if(this.sasIds.length>0){this.runSasPlaces();}this.sapeRTBDrawRtStats(95403,446640,93390459);}catch(e){this.sapeRTBTrackJsErrors(e.message,null,null,null,(e&&e.stack)?e:new Error(e.message));}};SapeRtbClientCode.prototype.getElementVisibility=function(element){var win=window,doc=element,visible=false,pos={t:0,l:0,w:element.clientWidth,h:element.clientHeight};if(this.visibilityWindow&&!!(element.offsetWidth||element.offsetHeight||element.getClientRects().length)){while(1){if(!doc){visible=false;break;}var rect=doc.getBoundingClientRect(),h=win.innerHeight||win.document.documentElement.clientHeight||win.document.body.clientHeight,w=win.innerWidth||win.document.documentElement.clientWidth||win.document.body.clientWidth;pos.t=pos.t+rect.top;if(pos.t<0){pos.h=Math.min(pos.h,Math.min(h,Math.max(0,pos.h+pos.t)));pos.t=0;}else{pos.h=Math.max(0,Math.min(pos.h,h-pos.t));}pos.l=pos.l+rect.left;if(pos.l<0){pos.w=Math.min(pos.w,Math.min(w,Math.max(0,pos.w+rect.left)));pos.l=0;}else{pos.w=Math.max(0,Math.min(pos.w,w-pos.l));}if(this.common.objectIsEqual(win,win.parent)){break;}else{doc=win.frameElement;win=win.parent;}}visible=true;}var d=pos.w*pos.h,v=0;if(d&&visible){v=Math.round(d*100/(element.clientWidth*element.clientHeight));}return{v:v,w:element.clientWidth,h:element.clientHeight,vw:pos.w,vh:pos.h,t:pos.t,l:pos.l};};SapeRtbClientCode.prototype.bindOnReady=function(handler){var called=false,doc=document.documentElement,w=window;function ready(){if(called){return;}called=true;handler();}function tryScroll(){if(called){return;}try{doc.doScroll("left");ready();}catch(e){setTimeout(tryScroll,10);}}if(document.addEventListener){document.addEventListener("DOMContentLoaded",ready,false);}else if(document.attachEvent){try{var isFrame=w.frameElement!=null;}catch(e){}if(doc.doScroll&&!isFrame){tryScroll();}document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"){ready();}})}else if(w.addEventListener){w.addEventListener('load',ready,false);}else if(w.attachEvent){w.attachEvent('onload',ready);}else{var fn=w.onload;w.onload=function(){fn&&fn();ready();}}};SapeRtbClientCode.prototype.run=function(){var that=this;var run=function(){if(typeof window.srtb_places!=='undefined'){var run=function(){that.runOnReady();};setTimeout(run,0);}else{that.runOnReady();}};if(document.readyState=='interactive'||document.readyState=='complete'){setTimeout(run,0);}else{this.bindOnReady(run);}};SapeRtbClientCode.prototype.sapeRTBDrawBanner=function(data,partner){var dv,result=1,that=this;dv=document.getElementById('SRTB_'+data.id);if((dv&&dv.children&&dv.children.length===0)||data.mobile){if(partner==7){result=this.sapeRTBInsertBtwElement(dv,data,7);}else if(partner==16){result=this.sapeRTBInsertSasElement(dv,data,16);}else if(partner==61){result=this.sapeRTBInsertDatElement(dv,data,61);}else if(partner==307){result=this.sapeRTBInsertBtwCpmElement(dv,data,307);}else if([83,183].indexOf(partner)>=0){result=2;}else{result=this.sapeRTBInsertStubElement(dv,data);}}if(data.type==this.type_banner&&result===0){this.sapeRTBSetEventListener('visibility',data.type,function(dv,visibility){var hash=false,v=that.getElementVisibility(dv).v;v=v>99?100:v>49?50:0;if(v&&v>visibility){hash=(new Date().getTime())+'-'+parseInt(Math.random()*10000);}return{hash:hash,v:v,wait:1000};});if(dv){dv.style.width=data.w+'px';dv.style.height=data.h+'px';}}if(result===0){this.sapeRTBAfterImp(data,partner,dv);}else if(result===1){if(partner!=0){this.sapeRTBTrackingCode(data,this.pix_err);}}return result===0||result===3;};SapeRtbClientCode.prototype.sapeRTBDrawRtStats=function(siteId,placeId,sectionId){var self=this,script=document.createElement('script'),win=window,fl=0,u;try{u=encodeURIComponent(window.top.location.toString());}catch(e){u=null;}while(this.common.objectIsEqual(win,win.top)===false){win=win.parent;fl++;}if(typeof window.sapeRTBreadRtStatResponse_96119==='undefined'){window.sapeRTBreadRtStatResponse_96119=function(response){try{var responseData=response?response[self.rtStatsSection.id]:undefined;if(responseData!==undefined&&responseData!==null){responseData.dt=responseData.dt.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,'');if(responseData.dt.indexOf('<script')===0&&responseData.dt.indexOf('sRTBMsg')!==-1){self.sapeRTBTrackingCodeRtStats(self.pix_noad,false,self.rtStatsSection.siteId,self.rtStatsSection.id,self.rtStatsSection.sectionId);}else{var div=document.createElement('div');div.id='SRTB_RT_STATS';div.style.display='none';div.innerHTML=responseData.dt;document.body.appendChild(div);self.common.evalNode(div);self.sapeRTBTrackingCodeRtStats(self.pix_ad,false,self.rtStatsSection.siteId,self.rtStatsSection.id,self.rtStatsSection.sectionId);}}}catch(e){self.sapeRTBTrackJsErrors(e.message,null,null,null,(e&&e.stack)?e:new Error(e.message));}}}script.src='//ssp-rtb.sape.ru/data/?callback=sapeRTBreadRtStatResponse_96119&srtbid='+siteId+'&scids='+sectionId+'&sx='+(window.innerWidth||window.document.documentElement.clientWidth||window.document.body.clientWidth)+'&sy='+(window.innerHeight||window.document.documentElement.clientHeight||window.document.body.clientHeight)+'&ref='+encodeURIComponent(window.document.referrer)+'&allimps=0'+'&fl='+fl+'&tz='+this.common.encodeUriParam(this.common.getTimeZoneOffsetIso8601());if(u!==null){script.src=script.src+'&u='+u;}script.async=true;this.rtStatsSection={id:placeId,siteId:siteId,sectionId:sectionId};this.sapeRTBTrackingCodeRtStats(this.pix_imp,false,siteId,placeId,sectionId);this.common.addEventListenerCrossBrowser(script,'error',function(){self.sapeRTBTrackingCodeRtStats(self.pix_err,false,siteId,placeId,sectionId);});document.body.appendChild(script);window._AUExGYqNVn0H=this.srtbid;};SapeRtbClientCode.prototype.sapeRTBTrackingCodeRtStats=function(status,force,siteId,placeId,sectionId){if(this.useProxy&&this.useProxyTracking===true){if(typeof this.rtStatsSection.ad_wait_imp!=='undefined'){delete this.rtStatsSection.ad_wait_imp;if(status===this.pix_noad){return;}this.sapeRTBTrackingCodeRtStats(this.pix_imp,true);}else if(status===this.pix_imp&&force===false){this.rtStatsSection.ad_wait_imp=true;return;}}var src='//www.acint.net/pxl/'+status+'?dp=16&id='+siteId+'.'+placeId+'.'+sectionId+'&sid='+this.sid+'&r=',possible="abcdefghijklmnopqrstuvwxyz0123456789";for(var i=0;i<12;i++){src+=possible.charAt(Math.floor(Math.random()*possible.length));}this.sapeRTBProxyTracking(src);};SapeRtbClientCode.prototype.sapeRTBInsertBtwCpmElement=function(p,data,partner_id){if(typeof data.btw_cpm_floor_cpm!='undefined'){return this.sapeRTBInsertBtwElement(p,data,partner_id,'btw_cpm_id','btw_floor_cpm');}if(this.common.sapeRTBisMobile()&&data.type!=this.type_mobile_video&&data.type!=this.type_mobile_float&&data.type!=this.type_mobile_fullscreen&&!this.isNG){return 2;}if(typeof data.branches_data[data.branch_number]==='undefined'||typeof data.branches_data[data.branch_number].btw_cpm_id==='undefined'){return 1;}var self=this;this.runBtwReadResponse(data.id,this.btw);this.sapeRTBAfterImp(data,partner_id,p);data.btw_waiting=true;setTimeout(function(){self.sapeRTBSkipBtw(data.id,partner_id,'btw_waiting');},5000);return 3;};SapeRtbClientCode.prototype.sapeRTBInsertDatElement=function(p,data){if(typeof data.branches_data[data.branch_number]==='undefined'||typeof data.branches_data[data.branch_number].sc_dat_id==='undefined'){return 1;}var self=this,div=document.createElement('div'),id="DIV_DA_"+data.branches_data[data.branch_number].sc_dat_id+"_"+parseInt(Math.random()*1e3);div.id=id;div.className='directadvert-block directadvert-block-'+data.branches_data[data.branch_number].sc_dat_id;if("undefined"===typeof loaded_blocks_directadvert){window.loaded_blocks_directadvert=[];function n(){var e=loaded_blocks_directadvert.shift(),t=e.adp_id,r=e.div,i=self.addScriptLoadListener(document.createElement('script'),data.id,'sectionId');i.type="text/javascript";i.async=true;i.charset="windows-1251";i.src="//code.directadvert.ru/data/"+t+".js?tag=sape_"+e.site_id+"_"+t+"_external_"+e.section_id+"&async=1&div="+r+"&t="+Math.random();var s=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0];s.appendChild(i);var o=setInterval(function(){if(document.getElementById(r)&&document.getElementById(r).innerHTML&&loaded_blocks_directadvert.length){n();clearInterval(o)}},50)}setTimeout(n,100);}loaded_blocks_directadvert.push({adp_id:data.branches_data[data.branch_number].sc_dat_id,div:id,srtb_id:data.id,site_id:data.dat_id,section_id:data.sections[data.branch_number][data.partner_number]});p.appendChild(div);return 0;};SapeRtbClientCode.prototype.sapeRTBInsertSasElement=function(p,data,partner_id){var w=window,self=this;if(typeof data.htmlData==='undefined'){if(typeof data.branches_data[data.branch_number]==='undefined'||typeof data.branches_data[data.branch_number].sc_id==='undefined'){return 2;}this.runSasPlacesRequest(data.branches_data[data.branch_number].sc_id,0);data.sas_waiting=true;data.current_partner=partner_id;setTimeout(function(){self.sapeRTBSkipSas(data.id);},5000);}else{if(p===null&&data.mobile){p=document.createElement('div');p.id='SRTB_'+data.id;var acl=document.createElement('a'),sectionId=data.id;acl.innerHTML='<img style="border:0;outline:none;width:32px;height:32px;" src="'+this.sapeRTBSourceIconClose()+'">';acl.style.position='absolute';acl.style.border=0;acl.style.outline='none';acl.style.zIndex=2147483647;acl.style.display="block";acl.style.right='0px';acl.style.top='0px';acl.href='#';acl.className='SRTB_CLOSE';var ifr=this.common.createIFrame('SRTB_PARTNER_'+data.id,w.innerWidth,w.innerHeight);ifr.style.display='block';ifr.style.position='fixed';ifr.style.top='0px';ifr.style.left='0px';ifr.style.zIndex=2147483646;ifr.style.width=w.innerWidth;ifr.style.height=w.innerHeight;p.appendChild(acl);p.appendChild(ifr);document.body.appendChild(p);this.common.addEventListenerCrossBrowser(this.common.firstChildTag(p),'click',this.sapeRTBClosePopup);this.common.evalNode(p);this.common.onIFrameDocumentReady('SRTB_PARTNER_'+data.id,function(d){d.open();d.write(data.htmlData);d.close();},function(){self.sapeRTBpostMessage({provider:'sRTBMsg',act:'showNext',partner_id:partner_id,sectionId:sectionId});});}else if(p!==null&&(data.type==this.type_video||data.type==this.type_inpage)){data.htmlData=data.htmlData.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,'');if(data.htmlData.indexOf('<script')==0&&data.htmlData.indexOf('sRTBMsg')!==-1){p.innerHTML=p.innerHTML+data.htmlData;this.common.evalNode(p);}else{this.sapeRTBInsertVastVideoElement(p,data,partner_id,'sas',false,false,0,data.htmlData);}}else if(typeof data.htmlAuto!=='undefined'&&data.htmlAuto){p.appendChild(this.common.createIFrame('SRTB_SAS_'+data.id,data.w,data.h));this.common.onIFrameDocumentReady('SRTB_SAS_'+data.id,function(d){d.open();d.write(data.htmlData);d.close();},function(){self.sapeRTBpostMessage({provider:'sRTBMsg',act:'showNext',partner_id:partner_id,sectionId:sectionId});});}else{p.innerHTML=p.innerHTML+data.htmlData;this.common.evalNode(p);}var d;for(d=0;d<this.ads.length;d++){if(this.ads[d].id===data.id){this.ads[d].sas_waiting=false;}}}return 0;};SapeRtbClientCode.prototype.sapeRTBSkipSas=function(id){try{for(var b=0;b<this.ads.length;b++){if(this.ads[b].id==id&&this.ads[b].sas_waiting){this.ads[b].sas_waiting=false;var ad=this.ads[b];if(typeof ad.branch_number!=='undefined'&&typeof ad.partner_number!=='undefined'&&typeof ad.branches[ad.branch_number]!=='undefined'&&ad.branches[ad.branch_number][ad.partner_number]==this.sas){this.sapeRTBTrackingCode(ad,this.pix_err);this.sapeRTBpostMessage({provider:'sRTBMsg',act:'showNext',partner_id:this.sas,sectionId:id});}}}}catch(e){this.sapeRTBTrackJsErrors(e.message,null,null,null,(e&&e.stack)?e:new Error(e.message));}};SapeRtbClientCode.prototype.sapeRTBInsertBtwElement=function(p,data,partner_id,btw_id,btw_floor_cpm){if(this.common.sapeRTBisMobile()&&data.type!=this.type_mobile_video&&data.type!=this.type_mobile_float&&data.type!=this.type_mobile_fullscreen&&!this.isNG){return 2;}if(typeof btw_id==='undefined'){btw_id='btw_id';}if(typeof data.branches_data[data.branch_number]==='undefined'||typeof data.branches_data[data.branch_number][btw_id]==='undefined'){return 1;}var subid=this.srtbuid+'.'+data.sections[data.branch_number][data.partner_number];if(typeof window.__adds_params__==='undefined'){window.__adds_params__={};}window.__adds_params__[data.branches_data[data.branch_number][btw_id]]={subid:subid};if(typeof btw_floor_cpm==='undefined'){btw_floor_cpm='btw_floor_cpm';}if(typeof data[btw_floor_cpm]!='undefined'){window.__adds_params__[data.branches_data[data.branch_number][btw_id]].floor_cpm=data[btw_floor_cpm];}if(data.type==this.type_video||data.type==this.type_inpage){return this.sapeRTBInsertVastVideoElement(p,data,partner_id,'btw_'+partner_id,'//match.ads.betweendigital.com/vpaid_prod?s='+data.branches_data[data.branch_number][btw_id]+'&maxd=300&w='+data.w+'&h='+(data.type==this.type_inpage?360:data.h)+'&startdelay=0&subid='+subid,false,40000,false,'complete');}var dv=document.createElement('div'),e=document.createElement('script'),self=this,did='b_script_'+data.branches_data[data.branch_number][btw_id];dv.id=did;e.type='text/javascript';e.async=true;e.charset='UTF-8';e.src='//dispenser-rtb.sape.ru/sections/2/'+data.branches_data[data.branch_number][btw_id]+'.js';if(data.popup&&window.addEventListener){window.addEventListener('message',function(event){if(event.data==="[object Object]"||(event.data.is_show&&event.data.section==data.branches_data[data.branch_number][btw_id]&&!p.hasAttribute('data-hide'))){p.style.display='block'}},false);}e=this.addScriptLoadListener(e,data.id,'sectionId');dv.appendChild(e);setTimeout(function(){var dv=document.getElementById(did);if(dv&&dv.clientHeight===0&&data.current_partner===partner_id){self.sapeRTBpostMessage({provider:'sRTBMsg',act:'showNext',partner_id:partner_id,sectionId:data.id});}},2000);if(data.mobile){this.sapeRTBSetEventListener('mobile','btw',function(ad){if(ad.type==self.type_mobile_float||ad.type==self.type_mobile_fullscreen){if(ad.branches[ad.branch_number][ad.partner_number-1]==self.btw||ad.branches[ad.branch_number][ad.partner_number-1]==self.btw2||ad.branches[ad.branch_number][ad.partner_number-1]==self.btw_cpm||ad.branches[ad.branch_number][ad.partner_number-1]==self.btw2_cpm){var btw_el=document.getElementById(ad.type==self.type_mobile_float?'fl_btw_ad_leftbottom':'fl_btw_ad_centercenter');if(btw_el){btw_el.parentNode.removeChild(btw_el);}}}});}p.appendChild(dv);return 0;};SapeRtbClientCode.prototype.sapeRTBSourceBlankVideo=function(){return 'data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAAAu1tZGF0AAACrQYF//+p3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE1NSByMjkwMSA3ZDBmZjIyIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxOCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTMgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MzoweDExMyBtZT1oZXggc3VibWU9NyBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0xIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MSA4eDhkY3Q9MSBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0tMiB0aHJlYWRzPTMgbG9va2FoZWFkX3RocmVhZHM9MSBzbGljZWRfdGhyZWFkcz0wIG5yPTAgZGVjaW1hdGU9MSBpbnRlcmxhY2VkPTAgYmx1cmF5X2NvbXBhdD0wIGNvbnN0cmFpbmVkX2ludHJhPTAgYmZyYW1lcz0zIGJfcHlyYW1pZD0yIGJfYWRhcHQ9MSBiX2JpYXM9MCBkaXJlY3Q9MSB3ZWlnaHRiPTEgb3Blbl9nb3A9MCB3ZWlnaHRwPTIga2V5aW50PTI1MCBrZXlpbnRfbWluPTEgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD00MCByYz1jcmYgbWJ0cmVlPTEgY3JmPTI4LjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IGlwX3JhdGlvPTEuNDAgYXE9MToxLjAwAIAAAAAwZYiEAD//8m+P5OXfBeLGOfKE3xkODvFZuBflHv/+VwJIta6cbpIo4ABLoKBaYTkTAAAC7m1vb3YAAABsbXZoZAAAAAAAAAAAAAAAAAAAA+gAAAPoAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAIYdHJhawAAAFx0a2hkAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAPoAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAACgAAAAWgAAAAAAJGVkdHMAAAAcZWxzdAAAAAAAAAABAAAD6AAAAAAAAQAAAAABkG1kaWEAAAAgbWRoZAAAAAAAAAAAAAAAAAAAQAAAAEAAVcQAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAAATttaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAD7c3RibAAAAJdzdHNkAAAAAAAAAAEAAACHYXZjMQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAACgAFoASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAADFhdmNDAWQACv/hABhnZAAKrNlCjfkhAAADAAEAAAMAAg8SJZYBAAZo6+JLIsAAAAAYc3R0cwAAAAAAAAABAAAAAQAAQAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAEAAAABAAAAFHN0c3oAAAAAAAAC5QAAAAEAAAAUc3RjbwAAAAAAAAABAAAAMAAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTguMTIuMTAw';};SapeRtbClientCode.prototype.sapeRTBSourceIconClose=function(){return 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAEGUlEQVRIx3WVW4he1R3F1zfzTbxmMokx5jIz+ZyoNcULiqE2PojiQ60UkRbRPmhboTe84IMUEUGDESTaIIxtjCZRGq3RRkNTEcVLrCK2aAVbikJAFKxCqtgWMef2+/lwTr7Gidn76Wz2f+29/mfttZKDhiP2k8QFfsd1PMnrzT/4O6/5uLd6oUcniX17+frRFU+6znf8msHb/srFSeLo4cuv9+Nuf2lRlJ9Xn1dFaWHZrb7nj/6/e065C93VlZbvN7tc7y+9yqu9zrt82g8bCytVH/KIORD2E5f5llpb7mWDYe5cyKwfYCnqi44fBOFo4rhvqPvr5vGueIYBk6xgBVMMOLGDeVobC/U5+10v2p66Q91fcg9hCedyCn3CCD16jBKO5FS+TQgPSmOpzib27MWxxGvUpmk2Es7ozlrGOKFPn7CIRd3qqYRtWqv6vY6Gx/GeWj5lOJ1wKQ9zC2E+izuoENazjfMJ3yC8pIX6hvPaHtyoVh8QRgnf5UOkdrvxBCZcwjzibkT3ciYhnMU+rNUfJnGMv6rFbw1rCZuxm48QTuJ4wu7h2nrCGsJj7R2eSeK3mkY/rlcZVhNuoEDKIcSB8hL5L1d0JC7ms1qb/3hyvF6tnifMEKcIDyJSIbKVPwy/KjYQJpnPIsJfsFGvjPerxaxhhnAMxxO2INIML94gFfcQphijzzThEazUO1ptlLcYVjJCWMgUYdtBEA1Ss5GwimMIowwIG7HS5uHwslbljYZpevYJx3oKcbON0ghSehdhtUcQ+vQYEO7ESnky7pkLsNjlxN/LEKByE2HgxKEAO8NubcpbhxSWMEHYOYeCbCVMMjGkcG9LYVv8zQEVrCJM0Cdd59vWtR0Q2UJYwtGMMk14rG3i7fEXarWHcCJ9lxF2KFqqcLdbEK0Q3UxYzgLGCW8i6g/iWRS6rz7HcBrhZmpb2TTcRwjbh0L6gp8Qvkn4Pv+rlU8cxBFeUYuHOilvav+9jbOG1U4TfucBRazrpLyrlfJT7WP6uVp/xApCOI+9yBfcRxxwlAtZStxOib7NMhYRLuKzxka9rAU41n+q5bO2Ol/Dr/kpcSkLCGEx44Qb2MCAMEl4vT3/z/aS1lAuV7XZ0kGEMMVRhr59wnyXE8MCJgk77cz1gsT+AUu7Xy0athLCWlbTG1raCGGM01hLCE9o072CONLeYTRxzOfVwvpZlxLCgBlWMs00K5lhmhDW8IrWVuqONskOtvX5vqBi+S+2evYhxn6Bj/rv1pH1iaEnfyUZ5vmAqrXFvnoPm7zNm7zJ233AV/m0trBRdcNhsynxCt7tQqyyoKzLuqQcZpL+zUsOn46jSeK41/Ia1dxobfbzkj/2yMSRIfdDIHqOtVCe47Vu4k+8zB7/6Kw/88xuz9hX4/1LJVMelgW0ppQAAAAASUVORK5CYII=';};SapeRtbClientCode.prototype.sapeRTBInsertImaPlayer=function(dv,type,w,h,options){var player=this.sapeRTBGetFlag('player_'+type),p=document.createElement('div');dv.style.width=w+'px';dv.style.height=h+'px';dv.style.overflow='hidden';if(player===false){var video=document.createElement('video');video.innerHTML='<source src="'+this.sapeRTBSourceBlankVideo()+'" type="video/mp4">';video.autoplay=true;video.width=w;video.height=h;video.style.cssText='width: '+video.width+'px; height: '+video.height+'px;';p.appendChild(video);player=new SapeRtbPlayer(video,options);this.sapeRTBSetFlag('player_'+type,player);}else{p.appendChild(player.getDom());}dv.appendChild(p);player.play(options);};SapeRtbClientCode.prototype.sapeRTBInsertVastVideoElement=function(dv,data,partner_id,key,url,autoResize,timeout,xml){if(url!==false&&this.sapeRTBGetFlag(key+'_added')){return 2;}var click=false,ad=false,error=false,muted=false,self=this,sectionId=data.sections[data.branch_number][data.partner_number];var stub=function(force){if(partner_id===data.current_partner&&(force===true||ad===false)){var player=self.sapeRTBGetFlag('player_'+data.type);if(player){var dom=player.getDom(),removeIfStub=function(){if(data.branches[data.branch_number][data.partner_number]==0){self.sapeRTBDelFlag('player_'+data.type);}};player.destroy(false);self.common.nodeRemove(dom);setTimeout(removeIfStub,1000);}delete data.visibility_start;self.sapeRTBDelMessageListener(key+'_video_'+data.id);self.scrollListener();self.sapeRTBpostMessage({provider:'sRTBMsg',act:'showNext',partner_id:partner_id,sectionId:data.id});}};if(url!==false){this.sapeRTBSetFlag(key+'_added',true);}if(typeof data.video_vtr==='undefined'){data.video_vtr=[];}try{this.sapeRTBInsertImaPlayer(dv,data.type,(data.type==this.type_inpage?640:data.w),(data.type==this.type_inpage?360:data.h),{xml:(xml=(xml||'').replace(/[\n\r\t]/g,''))?xml:false,url:url,hideControls:partner_id!=16,onEvent:function(ev,code){self.sapeRTBTrackingState(ev.indexOf('player')===0?'srtb':'ima',ev,partner_id,sectionId,data.id,code);if(error===false&&(ev==='playerAutoplayFalse'||ev==='playerImaWait'||ev==='playerVastError')){self.sapeRTBTrackingCode(data,self.pix_err);error=true;}var vtr=false;switch(ev){case 'playerVastRun':data.visibility_start=true;self.scrollListener();break;case 'mute':muted=true;break;case 'start':vtr=0;break;case 'midpoint':vtr=50;if(this.isMuted()===false&&muted===false&&data.visibility_stop===false){data.visibility_midpoint=true;}else{data.visibility_stop=true;}self.scrollListener();break;case 'thirdQuartile':vtr=75;break;case 'complete':vtr=100;break;}if(vtr!==false&&data.video_vtr.indexOf(vtr)<0){data.video_vtr.push(vtr);self.sapeRTBTrackingState('srtb','vtr'+vtr,14,0,data.id,0);}},onStart:function(){if(ad===false){self.sapeRTBTrackingCode(data,self.pix_ad);ad=true;}},onClick:function(){if(click===false){self.sapeRTBTrackingCode(data,self.pix_click);click=true;}},onComplete:function(){stub(true);},onError:function(e){if(e){self.sapeRTBTrackJsErrors('Player: '+e);}stub(true);}});}catch(e){self.sapeRTBTrackJsErrors(e,null,null,null,e)}this.sapeRTBSetEventListener('visibility',data.type,function(dv,visibility,ad){if(typeof ad.visibility_start==='undefined'){return{hash:false,clean:true};}if(ad.visibility_start===false){return{hash:false};}if(ad.visibility_midpoint){return{hash:100,v:100,wait:0,clean:true};}var v=self.getElementVisibility(dv).v;if(v&&v>49&&visibility===0){return{hash:(new Date().getTime())+'-'+parseInt(Math.random()*10000),v:50,wait:2000,clean:ad.visibility_stop};}if(v<100){ad.visibility_stop=true;}return{hash:false,clean:visibility>0&&ad.visibility_stop};});if(url!==false){if(typeof timeout==='undefined'){timeout=40000;}setTimeout(stub,timeout,false);}if(typeof autoResize==='undefined'||autoResize===false){data.popup_video_autozoom=false;}data.visibility_start=false;data.visibility_midpoint=false;data.visibility_stop=false;return 0;};SapeRtbClientCode.prototype.runBtwReadResponse=function(place_id,partner_id){var e=document.createElement('script'),self=this;e.type="text/javascript";e.async=true;e.charset='UTF-8';e.src='//ssp-rtb.sape.ru/crypme/?callback=sapeRTBreadBtwResponse_96119&place='+place_id+'&partner='+partner_id;e=this.addScriptLoadListener(e,place_id,null);if(typeof window.sapeRTBreadBtwResponse_96119==='undefined'){window.sapeRTBreadBtwResponse_96119=function(response){if(typeof response!=='object'||response===null){return;}try{for(var b=0;b<self.ads.length;b++){var data=self.ads[b],responseData=response[data.id],partner_id;if(responseData!==undefined&&responseData!==null&&(data.btw_waiting||data.btw2_waiting)){partner_id=data.btw_waiting?self.btw_cpm:self.btw2_cpm;if(typeof responseData.floor_cpm==='undefined'||responseData.floor_cpm===null){self.sapeRTBSkipBtw(data.id,partner_id,data.btw_waiting?'btw_waiting':'btw2_waiting');continue;}self.ads[b][(data.btw_waiting?'btw_cpm_floor_cpm':'btw2_cpm_floor_cpm')]=responseData.floor_cpm;if(data.btw_waiting){self.ads[b].btw_waiting=false;}else{self.ads[b].btw2_waiting=false;}if(((data.popup&&data.type!=self.type_video)||data.float)&&document.getElementById('SRTB_'+data.id)){document.getElementById('SRTB_'+data.id).parentNode.removeChild(document.getElementById('SRTB_'+data.id));}if(typeof data.lock_by_flag!=='undefined'){self.sapeRTBDelFlag(data.lock_by_flag);}if(self.sapeRTBDrawBanner(data,partner_id)){self.ads[b].current_partner=partner_id;}else{self.sapeRTBpostMessage({provider:'sRTBMsg',act:'showNext',partner_id:partner_id,sectionId:data.id});}}}}catch(e){self.sapeRTBTrackJsErrors(e.message,null,null,null,(e&&e.stack)?e:new Error(e.message));}}}document.body.appendChild(e);};SapeRtbClientCode.prototype.sapeRTBSkipBtw=function(id,partner_id,waiting){try{for(var b=0;b<this.ads.length;b++){if(this.ads[b].id==id&&this.ads[b][waiting]){this.ads[b][waiting]=false;var ad=this.ads[b];if(typeof ad.branch_number!=='undefined'&&typeof ad.partner_number!=='undefined'&&typeof ad.branches[ad.branch_number]!=='undefined'&&ad.branches[ad.branch_number][ad.partner_number]==partner_id){this.sapeRTBTrackingCode(ad,this.pix_err);this.sapeRTBpostMessage({provider:'sRTBMsg',act:'showNext',partner_id:partner_id,sectionId:id});}}}}catch(e){this.sapeRTBTrackJsErrors(e.message,null,null,null,(e&&e.stack)?e:new Error(e.message));}};SapeRtbClientCode.prototype.runPlace=function(b,rnd){var isMobile=this.common.sapeRTBisMobile();if((this.ads[b].mobile&&!isMobile)||(this.ads[b].float&&isMobile)){return true;}if(rnd<=50){return this.branchCodeStd(this.ads[b],'16,307,7,183,83,61,0');}else if(rnd<=94){return this.branchCodeStd(this.ads[b],'16,307,7,183,83,61,0');}else if(rnd<=95){return this.branchCodeStd(this.ads[b],'307,7,183,83,61,16,0');}else if(rnd<=96){return this.branchCodeStd(this.ads[b],'7,183,83,61,16,307,0');}else if(rnd<=97){return this.branchCodeStd(this.ads[b],'183,83,61,16,307,7,0');}else if(rnd<=98){return this.branchCodeStd(this.ads[b],'83,61,16,307,7,183,0');}else if(rnd<=99){return this.branchCodeStd(this.ads[b],'61,16,307,7,183,83,0');}else if(rnd<=100){return this.branchCodeStd(this.ads[b],'16,307,7,183,83,61,0');}};(function(w,d){var srtbid=96119,srtbuid=1427098,isNG=0,rfrsh=1,srtbdmn=["randomes.top"],ads=[{"id":"449927","w":300,"h":250,"type":"1","popup":0,"mobile":0,"free":0,"check":1,"float":0,"done":0,"branches":[[16,307,7,183,83,61,0],[16,307,7,183,83,61,0],[307,7,183,83,61,16,0],[7,183,83,61,16,307,0],[183,83,61,16,307,7,0],[83,61,16,307,7,183,0],[61,16,307,7,183,83,0],[16,307,7,183,83,61,0]],"branches_data":[{"btw_id":"3182609","sc_id":"97337116","sc_dat_id":"1985496","btw_cpm_id":"3182610"},{"btw_id":"3182609","sc_id":"97337122","sc_dat_id":"1985496","btw_cpm_id":"3182610"},{"btw_id":"3182609","sc_id":"97337133","sc_dat_id":"1985496","btw_cpm_id":"3182610"},{"btw_id":"3182609","sc_id":"97337138","sc_dat_id":"1985496","btw_cpm_id":"3182610"},{"btw_id":"3182609","sc_id":"97337143","sc_dat_id":"1985496","btw_cpm_id":"3182610"},{"btw_id":"3182609","sc_id":"97337148","sc_dat_id":"1985496","btw_cpm_id":"3182610"},{"btw_id":"3182609","sc_id":"97337153","sc_dat_id":"1985496","btw_cpm_id":"3182610"},{"btw_id":"3182609","sc_id":"97337158","sc_dat_id":"1985496","btw_cpm_id":"3182610"}],"sections":[{"2":"97337118","0":"97337116","5":"97337121","4":"97337120","3":"97337119","1":"97337117"},{"2":"97337124","0":"97337122","5":"97337127","4":"97337126","3":"97337125","1":"97337123"},{"1":"97337129","5":"97337133","4":"97337132","3":"97337131","2":"97337130","0":"97337128"},{"0":"97337134","4":"97337138","3":"97337137","2":"97337136","1":"97337135","5":"97337139"},{"5":"97337145","3":"97337143","2":"97337142","1":"97337141","0":"97337140","4":"97337144"},{"4":"97337150","2":"97337148","1":"97337147","0":"97337146","5":"97337151","3":"97337149"},{"3":"97337155","1":"97337153","0":"97337152","5":"97337157","4":"97337156","2":"97337154"},{"2":"97337160","0":"97337158","5":"97337163","4":"97337162","3":"97337161","1":"97337159"}],"popup_closed":0,"dat_id":"764290"}],constData={"type_inpage":6,"type_banner":1,"type_video":3,"type_mobile_video":9,"type_mobile_float":8,"type_mobile_fullscreen":7,"type_native":11,"tml":32,"tml_cpm":132,"sas":16,"btw":7,"btw2":107,"btw_cpm":307,"btw2_cpm":407,"btw_chp":207,"crt":28,"wvd":53,"wvd2":153,"mgid":64,"mmb":46,"mba":51,"dat":61,"dat2":161,"adts":83,"adts_cpm":183,"advr":82,"vdpk":89,"otm":68,"smi2":90,"flb":36,"brl":40,"rpb":54,"rpb_cpm":154,"bssp":95,"adap":38,"pix_err":5,"pix_noad":3,"pix_ad":2,"pix_imp":1,"pix_click":4,"pix_rfrsh":6,"bottom_right":1,"bottom_left":2,"bottom_center":6,"top_right":3,"top_left":4,"top_center":5};if(typeof w.sapeRtbHandler_96119==='undefined'){w.sapeRtbHandler_96119=(new SapeRtbClientCode(srtbid,srtbuid,isNG,rfrsh,srtbdmn,ads,constData));w.srtb_sid=w.sapeRtbHandler_96119.sid;w.sapeRtbHandler_96119.run();}})(window,document);var aafVYIyfvUHGVufyud=window;if(!Object.prototype.hasOwnProperty.call(aafVYIyfvUHGVufyud,'_acic')||typeof window._acic!=='object'){var _acic={dataProvider:14};(function(){var e=document.createElement("script");e.type="text/javascript";e.async=true;e.src="//www.acint.net/aci.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)})()}